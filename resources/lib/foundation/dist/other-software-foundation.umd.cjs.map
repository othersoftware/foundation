{"version":3,"file":"other-software-foundation.umd.cjs","sources":["../src/Http/Client/Response.ts","../src/Services/StateManager.ts","../src/Http/Client/Request.ts","../src/Support/ErrorModal.ts","../src/Events/EventBus.ts","../src/Composables/UseHttpClient.ts","../src/Services/FormContext.ts","../src/Support/Url.ts","../src/Support/FormData.ts","../src/Components/Controllers/FormControllerComponent.ts","../src/Services/StackedView.ts","../src/Support/Wrap.ts","../src/Composables/UseViewResolver.ts","../src/Composables/UseViewStack.ts","../src/Composables/UseViewDepth.ts","../src/Composables/UseStackLayout.ts","../src/Components/Routing/RouterViewComponent.ts","../src/Components/Routing/RouterLinkComponent.ts","../src/Services/ToastManager.ts","../src/Components/Routing/RouterNestedViewComponent.ts","../src/Components/Routing/RouterNestedComponent.ts","../src/Components/Routing/RouterFrameComponent.ts","../src/Components/Controllers/ToastControllerComponent.ts","../src/Components/Controllers/PasswordConfirmationControllerComponent.ts","../src/Support/Translator.ts","../src/Support/Route.ts","../src/Services/MetaManager.ts","../src/Components/Routing/RouterComponent.ts","../src/Application/Factory.ts","../src/Composables/UseConfirmation.ts","../src/Composables/UseFormApi.ts","../src/Composables/UseFormContext.ts","../src/Composables/UseViewLocation.ts","../src/Composables/UseViewParent.ts","../src/Composables/UseViewQuery.ts","../src/Support/Array.ts","../src/Support/Countries.ts","../src/Support/Empty.ts","../src/Support/Hash.ts","../src/Support/NestedSet.ts","../src/Support/Random.ts","../src/Support/Scroll.ts","../src/Types/Toast.ts","../src/main.ts"],"sourcesContent":["import type { StackedView } from '../../Types/StackedView';\nimport type { RouterRedirect } from '../../Types/RouterRedirect';\nimport type { ToastRegistry } from '../../Types/Toast';\nimport type { Authenticated, Abilities, SharedState, Meta, ViewErrorsBag } from '../../Types/State';\n\nexport class Response {\n  protected readonly xhr: XMLHttpRequest;\n\n  public readonly status: number;\n  public readonly success: boolean;\n  public readonly fail: boolean;\n  public readonly partial: boolean;\n  public readonly raw: boolean;\n  public readonly message: string;\n  public readonly content: string;\n\n  constructor(xhr: XMLHttpRequest) {\n    this.xhr = xhr;\n\n    if (this.xhr.getResponseHeader('x-stack-router')) {\n      throw new Error('Invalid response for MVC HTTP client.');\n    }\n\n    this.status = this.xhr.status;\n    this.success = (this.xhr.status >= 200 && this.xhr.status < 300);\n    this.fail = !this.success;\n    this.content = this.xhr.response;\n    this.message = this.xhr.statusText;\n\n    this.partial = !!this.xhr.getResponseHeader('x-partial');\n    this.raw = !!this.xhr.getResponseHeader('x-raw');\n  }\n}\n\nexport class CompleteResponse extends Response {\n  public abilities: Abilities;\n  public meta: Meta[] | undefined;\n  public shared: SharedState | undefined;\n  public authenticated: Authenticated | null;\n  public location: string;\n  public signature: string;\n  public redirect: RouterRedirect;\n  public stack: StackedView;\n  public toasts: ToastRegistry;\n  public errors: ViewErrorsBag;\n  public data: any;\n\n  constructor(xhr: XMLHttpRequest) {\n    super(xhr);\n\n    let data = JSON.parse(this.xhr.response);\n\n    this.meta = data.meta;\n    this.abilities = data.abilities;\n    this.shared = data.shared;\n    this.authenticated = data.authenticated;\n    this.location = data.location;\n    this.signature = data.signature;\n    this.redirect = data.redirect;\n    this.stack = data.stack;\n    this.errors = data.errors;\n    this.toasts = data.toasts;\n    this.data = data.raw;\n  }\n}\n","import { type InjectionKey, inject, type Ref } from 'vue';\nimport type { StateManager, Authenticated, Abilities, StateHistory, SharedState, ViewErrorsBag } from '../Types/State';\nimport type { StackedView, StackedViewResolved } from '../Types/StackedView';\n\nexport const StateLocationInjectionKey = Symbol('StateLocation') as InjectionKey<Ref<string>>;\nexport const StateStackSignatureInjectionKey = Symbol('StateStackSignature') as InjectionKey<Ref<string>>;\nexport const StateShared = Symbol('StateShared') as InjectionKey<Ref<SharedState>>;\nexport const StateAuthenticated = Symbol('StateAuthenticated') as InjectionKey<Ref<Authenticated | null>>;\nexport const StateAbilities = Symbol('StateAbilities') as InjectionKey<Ref<Abilities>>;\nexport const StateManagerInjectionKey = Symbol('StateManager') as InjectionKey<StateManager>;\nexport const StateHistoryInjectionKey = Symbol('StateHistory') as InjectionKey<StateHistory>;\nexport const StateErrorsInjectionKey = Symbol('StateErrors') as InjectionKey<Ref<ViewErrorsBag>>;\n\nexport function useAbilities() {\n  let abilities = inject(StateAbilities);\n\n  if (!abilities) {\n    throw new Error('Abilities are used out of router context!');\n  }\n\n  return abilities;\n}\n\nexport function useAuthenticated() {\n  let authenticated = inject(StateAuthenticated);\n\n  if (!authenticated) {\n    throw new Error('Authenticated is used out of router context!');\n  }\n\n  return authenticated;\n}\n\nexport function useShared() {\n  let shared = inject(StateShared);\n\n  if (!shared) {\n    throw new Error('Shared state is used out of router context!');\n  }\n\n  return shared;\n}\n\nexport function useLocation() {\n  let location = inject(StateLocationInjectionKey);\n\n  if (!location) {\n    throw new Error('Location is used out of router context!');\n  }\n\n  return location;\n}\n\nexport function useStackSignature() {\n  let signature = inject(StateStackSignatureInjectionKey);\n\n  if (!signature) {\n    throw new Error('Stack signature is used out of router context!');\n  }\n\n  return signature;\n}\n\nexport function useStateManager() {\n  let manager = inject(StateManagerInjectionKey);\n\n  if (!manager) {\n    throw new Error('State manager is used out of router context!');\n  }\n\n  return { update: manager };\n}\n\nexport function useStateHistory() {\n  let history = inject(StateHistoryInjectionKey);\n\n  if (!history) {\n    throw new Error('State history is used out of router context!');\n  }\n\n  return history;\n}\n\nexport function useErrors() {\n  let errors = inject(StateErrorsInjectionKey);\n\n  if (!errors) {\n    throw new Error('State errors is used out of router context!');\n  }\n\n  return errors;\n}\n\nexport function updateStack(current: StackedViewResolved, fresh: StackedView): StackedViewResolved {\n  if ('keep' in fresh) {\n    if (fresh.child) {\n      if (current.child) {\n        current.child = updateStack(current.child, fresh.child);\n      } else {\n        current.child = fresh.child as StackedViewResolved;\n      }\n\n      return { ...current };\n    }\n\n    return { ...current };\n  }\n\n  return { ...fresh };\n}\n","import { Response, CompleteResponse } from './Response';\n\nexport type Method = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' | string;\nexport type Body = XMLHttpRequestBodyInit | Object | null | undefined;\nexport type Signature = string | undefined;\n\nexport interface RequestOptions {\n  method: Method,\n  url: string,\n  body?: Body | undefined,\n  signature?: Signature | undefined,\n  refreshStack?: boolean | undefined,\n  referer?: string | null | undefined,\n  nested?: boolean | undefined,\n}\n\nexport class Request {\n  protected method: Method;\n  protected url: string;\n  protected xhr: XMLHttpRequest;\n  protected body: Body;\n  protected signature: Signature;\n  protected refreshStack: boolean;\n  protected referer: string | null | undefined;\n  protected nested: boolean;\n\n  static send(options: RequestOptions) {\n    return new Request(options).send();\n  }\n\n  constructor({\n    method,\n    url,\n    body = undefined,\n    signature = undefined,\n    refreshStack = false,\n    referer = undefined,\n    nested = false,\n  }: RequestOptions) {\n    this.xhr = new XMLHttpRequest();\n    this.method = method;\n    this.url = url;\n    this.body = body;\n    this.signature = signature;\n    this.refreshStack = refreshStack;\n    this.referer = referer;\n    this.nested = nested;\n  }\n\n  public send(): Promise<CompleteResponse> {\n    return new Promise((resolve, reject) => {\n      this.xhr.open(this.method, this.url, true);\n\n      this.xhr.setRequestHeader('Language', APP_LOCALE);\n      this.xhr.setRequestHeader('X-Stack-Router', 'true');\n      this.xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      this.xhr.setRequestHeader('X-XSRF-TOKEN', this.readCookie('XSRF-TOKEN'));\n\n      if (this.referer) {\n        this.xhr.setRequestHeader('X-Stack-Referer', this.referer);\n      }\n\n      if (this.refreshStack) {\n        this.xhr.setRequestHeader('X-Stack-Refresh', 'true');\n      }\n\n      if (this.nested) {\n        this.xhr.setRequestHeader('X-Stack-Nested', 'true');\n      }\n\n      if (this.signature) {\n        this.xhr.setRequestHeader('X-Stack-Signature', this.signature);\n      }\n\n      this.xhr.onload = () => {\n        if (this.xhr.readyState === XMLHttpRequest.DONE && this.xhr.status) {\n          if (this.xhr.status < 200 || this.xhr.status >= 300) {\n            if (this.xhr.status === 422) {\n              reject(new CompleteResponse(this.xhr));\n            } else {\n              reject(new Response(this.xhr));\n            }\n          } else {\n            resolve(new CompleteResponse(this.xhr));\n          }\n        }\n      };\n\n      this.xhr.onerror = () => {\n        reject(new Response(this.xhr));\n      };\n\n      this.xhr.send(this.transform(this.body));\n    });\n  }\n\n  protected transform(body: any) {\n    if (body instanceof Blob || body instanceof ArrayBuffer || body instanceof FormData || body instanceof URLSearchParams) {\n      return body;\n    }\n\n    if (typeof body === 'string') {\n      return body;\n    }\n\n    if (body === null) {\n      return null;\n    }\n\n    this.xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n\n    return JSON.stringify(body);\n  }\n\n  protected readCookie(name: string): string {\n    const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n\n    if (match) {\n      return (match ? decodeURIComponent(match[3]!) : '');\n    }\n\n    return '';\n  }\n}\n","export const ErrorModal = {\n  modal: undefined as HTMLDialogElement | undefined,\n  listener: undefined as any,\n\n  show(html: Record<string, unknown> | string): void {\n    if (typeof html === 'object') {\n      html = `All requests must receive a valid MVC response, however a plain JSON response was received.<hr>${JSON.stringify(html)}`;\n    }\n\n    const page = document.createElement('html');\n    page.innerHTML = html;\n    page.querySelectorAll('a').forEach((a) => a.setAttribute('target', '_top'));\n\n    this.modal = document.createElement('dialog') as HTMLDialogElement;\n    this.modal.style.display = 'flex';\n    this.modal.style.width = '100%';\n    this.modal.style.height = '100dvh';\n    this.modal.style.maxWidth = '100%';\n    this.modal.style.maxHeight = '100dvh';\n    this.modal.style.padding = '2rem';\n    this.modal.style.boxSizing = 'border-box';\n    this.modal.style.border = 'none';\n    this.modal.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n    this.modal.style.backdropFilter = 'blur(0.125rem)';\n    this.modal.addEventListener('click', () => this.hide());\n\n    const iframe = document.createElement('iframe');\n    iframe.style.backgroundColor = 'white';\n    iframe.style.borderRadius = '0.5rem';\n    iframe.style.border = 'none';\n    iframe.style.width = '100%';\n    iframe.style.height = '100%';\n    this.modal.appendChild(iframe);\n\n    document.body.prepend(this.modal);\n    document.body.style.overflow = 'hidden';\n\n    if (!iframe.contentWindow) {\n      throw new Error('iframe not yet ready.');\n    }\n\n    iframe.contentWindow.document.open();\n    iframe.contentWindow.document.write(page.outerHTML);\n    iframe.contentWindow.document.close();\n\n    this.listener = this.hideOnEscape.bind(this);\n\n    this.modal.showModal();\n\n    document.addEventListener('keydown', this.listener);\n  },\n\n  hide(): void {\n    this.modal!.outerHTML = '';\n    this.modal = undefined;\n    document.body.style.overflow = 'visible';\n    document.removeEventListener('keydown', this.listener!);\n  },\n\n  hideOnEscape(event: KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      this.hide();\n    }\n  },\n};\n","type EventName = string;\ntype EventHandler = (event?: any) => boolean | undefined | void;\ntype EventHandlerRegistry = EventHandler[];\ntype EventSubscriptions = Record<EventName, EventHandlerRegistry>;\n\nconst subscriptions: EventSubscriptions = {};\n\nexport const EventBus = {\n\n  addEventListener(name: EventName, callback: EventHandler) {\n    if (subscriptions[name]) {\n      subscriptions[name].push(callback);\n    } else {\n      subscriptions[name] = [callback];\n    }\n  },\n\n  removeEventListener(name: EventName, callback: EventHandler) {\n    if (!subscriptions[name]) {\n      return;\n    }\n\n    subscriptions[name] = subscriptions[name].filter((handler) => {\n      return handler !== callback;\n    });\n\n    if (subscriptions[name].length === 0) {\n      delete subscriptions[name];\n    }\n  },\n\n  dispatch<T>(name: EventName, event?: T): T | undefined {\n    if (subscriptions[name]) {\n      subscriptions[name].forEach((handler) => handler(event));\n    }\n\n    return event;\n  },\n\n};\n","import { useStateManager, useStackSignature, useStateHistory, useLocation } from '../Services/StateManager';\nimport { Request, type Method, type Body, type RequestOptions } from '../Http/Client/Request';\nimport { ErrorModal } from '../Support/ErrorModal';\nimport type { Response } from '../Http/Client/Response';\nimport { CompleteResponse } from '../Http/Client/Response';\nimport { EventBus } from '../Events/EventBus';\nimport { inject, type InjectionKey } from 'vue';\nimport lodashMerge from 'lodash.merge';\n\ninterface HttpOptions extends Omit<RequestOptions, 'method' | 'url' | 'body' | 'signature' | 'referer'> {\n  data?: Body | undefined;\n  preserveScroll?: boolean | undefined;\n  replace?: boolean | undefined;\n}\n\nexport const HttpClientScrollHandler = Symbol('HttpClientScrollHandler') as InjectionKey<undefined | (() => void)>;\nexport const HttpClientForceScrollPreservation = Symbol('HttpClientForceScrollPreservation') as InjectionKey<boolean>;\nexport const HttpClientForceNested = Symbol('HttpClientForceNested') as InjectionKey<boolean>;\n\nexport function useHttpClient() {\n  const state = useStateManager();\n  const signature = useStackSignature();\n  const history = useStateHistory();\n  const location = useLocation();\n\n  const scrollHandler = inject(HttpClientScrollHandler, () => document.body.scroll({ behavior: 'instant', left: 0, top: 0 }));\n  const forceScrollPreserve = inject(HttpClientForceScrollPreservation, false);\n  const forceNested = inject(HttpClientForceNested, false);\n\n  async function dispatch(method: Method, url: string, { data = undefined, preserveScroll = false, replace = false, nested = false, ...options }: HttpOptions = {}, previous: CompleteResponse | undefined = undefined) {\n    document.body.classList.add('osf-loading');\n    document.dispatchEvent(new Event('visit:start'));\n\n    return await Request.send({\n      ...options,\n      method,\n      url,\n      body: data,\n      signature: signature.value,\n      referer: location.value,\n      nested: nested || forceNested,\n    }).then(async (response: CompleteResponse) => {\n      if (previous) {\n        response.abilities = { ...previous.abilities, ...response.abilities };\n        response.shared = { ...previous.shared, ...response.shared };\n        response.toasts = lodashMerge(previous.toasts, response.toasts);\n        response.errors = lodashMerge(previous.errors, response.errors);\n      }\n\n      if (response.redirect) {\n        return await handleRedirectResponse(response);\n      }\n\n      return await state.update(response).then(async (fresh): Promise<any> => {\n        if (response.raw) {\n          return Promise.resolve(response.data);\n        }\n\n        if (!forceScrollPreserve && !preserveScroll) {\n          resetScrollPosition();\n        }\n\n        if (replace) {\n          history.historyReplaceState(fresh);\n        } else {\n          history.historyPushState(fresh);\n        }\n\n        return Promise.resolve(response);\n      });\n    }).catch(async (error: Response | CompleteResponse) => {\n      if (error instanceof CompleteResponse) {\n        return await state.update(error).then(() => Promise.reject(error));\n      }\n\n      if (error.status === 423) {\n        EventBus.dispatch('password.confirm', { method, url, options: { data, preserveScroll, replace } });\n\n        return Promise.reject(error);\n      }\n\n      console.error(error);\n\n      if (APP_DEBUG && error.content) {\n        ErrorModal.show(error.content);\n      }\n\n      return Promise.reject(error);\n    }).finally(() => {\n      document.body.classList.remove('osf-loading');\n      document.dispatchEvent(new Event('visit:done'));\n    });\n  }\n\n  function resetScrollPosition() {\n    if (scrollHandler) {\n      scrollHandler();\n    }\n  }\n\n  async function handleRedirectResponse(response: CompleteResponse): Promise<any> {\n    if (response.redirect.reload) {\n      return await new Promise(() => {\n        window.location.href = response.redirect.target;\n      });\n    }\n\n    return await dispatch('GET', response.redirect.target, {\n      preserveScroll: true,\n      replace: false,\n      refreshStack: true,\n    }, response);\n  }\n\n  return {\n    dispatch,\n\n    get: async function (url: string) {\n      return await dispatch('GET', url);\n    },\n\n    post: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('POST', url, { data, preserveScroll: true });\n    },\n\n    patch: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('PATCH', url, { data, preserveScroll: true });\n    },\n\n    put: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('PUT', url, { data, preserveScroll: true });\n    },\n\n    delete: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('DELETE', url, { data, preserveScroll: true });\n    },\n  };\n}\n","import { ref, type Ref, type InjectionKey, computed, type MaybeRefOrGetter, toValue, watch } from 'vue';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport lodashSet from 'lodash.set';\nimport lodashGet from 'lodash.get';\nimport { useErrors } from './StateManager.ts';\n\nexport const FormContextInjectionKey = Symbol('FormContext') as InjectionKey<FormContextInterface>;\nexport type InputFilesReader = () => File | File[] | null | undefined;\n\nexport function createFormContext(\n  initialData: MaybeRefOrGetter<Record<string, any>>,\n  initialBag: MaybeRefOrGetter<string>,\n  initialReadonly: MaybeRefOrGetter<boolean>,\n) {\n  const bags = useErrors();\n\n  const data = ref(lodashCloneDeep(toValue(initialData)));\n  const files = ref({});\n  const readonly = ref(toValue(initialReadonly));\n  const bag = ref(toValue(initialBag));\n\n  const touched = ref({}) as Ref<Record<string, boolean>>;\n  const processing = ref(false);\n\n  const errors = computed(() => bags.value[bag.value] || {});\n\n  function touch(name: string) {\n    lodashSet(touched.value, name, true);\n  }\n\n  function value(name: string, value: any) {\n    return lodashGet(data.value, name, value);\n  }\n\n  function fill(name: string, value: any, filesReader: InputFilesReader | undefined = undefined) {\n    if (filesReader) {\n      lodashSet(files.value, name, filesReader());\n    }\n\n    lodashSet(data.value, name, value);\n  }\n\n  watch(() => toValue(initialData), (value) => data.value = lodashCloneDeep(value));\n  watch(() => toValue(initialBag), (value) => bag.value = value);\n  watch(() => toValue(initialReadonly), (value) => readonly.value = value);\n\n  return {\n    data,\n    files,\n    errors,\n    touched,\n    processing,\n    readonly,\n    touch,\n    value,\n    fill,\n  };\n}\n\nexport type FormContextInterface = ReturnType<typeof createFormContext>;\n\nexport function setModelWithContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any): any;\nexport function setModelWithContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any, input: HTMLInputElement | null | undefined): any;\nexport function setModelWithContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any, input: HTMLInputElement | null | undefined = undefined) {\n  if (name && ctx) {\n    ctx.touch(name);\n    ctx.fill(name, value, () => {\n      if (input) {\n        if (input.files instanceof FileList) {\n          if (input.multiple) {\n            return Array.from(input.files);\n          } else {\n            return input.files.item(0);\n          }\n        }\n      }\n    });\n  }\n\n  return value;\n}\n\nexport function getModelFromContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any) {\n  if (name && ctx) {\n    return ctx.value(name, value);\n  }\n\n  return value;\n}\n","import { toRaw } from 'vue';\n\nexport function url(uri: string, params?: Record<string, any>, hash?: string, base?: string | null) {\n  const url = new URL(uri, base || APP_URL);\n\n  if (params) {\n    attachSearchParameters(url.searchParams, params);\n  }\n\n  if (hash) {\n    url.hash = hash;\n  }\n\n  return url.toString();\n}\n\n\nfunction attachSearchParameters(search: URLSearchParams, params: Record<string, any>) {\n  Object.keys(params).forEach((key) => {\n    appendSearchParameter(search, key, toRaw(params[key]));\n  });\n}\n\n\nfunction appendSearchParameter(search: URLSearchParams, name: string, value: any, prev?: string) {\n  if (prev) {\n    name = prev + '[' + name + ']';\n  }\n\n  if (value == null) {\n    search.set(name, '');\n    return search;\n  }\n\n  if (Array.isArray(value)) {\n    value.forEach((arrValue, arrIndex) => {\n      appendSearchParameter(search, arrIndex.toString(), arrValue, name);\n    });\n\n    return search;\n  }\n\n  if (typeof value === 'object') {\n    Object.keys(value).forEach((key) => {\n      appendSearchParameter(search, key, value[key], name);\n    });\n\n    return search;\n  }\n\n  if (typeof value === 'boolean') {\n    value = Number(value);\n  }\n\n  if (value == null) {\n    value = '';\n  }\n\n  search.set(name, value);\n\n  return search;\n}\n","import { toRaw } from 'vue';\n\nexport function buildFormData(data: Record<string, any> | null | undefined) {\n  let result = new FormData();\n\n  if (data) {\n    attachFields(result, data);\n  }\n\n  return result;\n}\n\nfunction attachFields(data: FormData, fields: Record<string, any>) {\n  Object.keys(fields).forEach((key) => appendField(data, key, toRaw(fields[key])));\n}\n\n\nfunction appendField(data: FormData, name: string, value: any, prev?: string) {\n  if (prev) {\n    name = prev + '[' + name + ']';\n  }\n\n  if (value == null) {\n    data.set(name, '');\n    return data;\n  }\n\n  if (value instanceof File) {\n    data.set(name, value);\n    return data;\n  }\n\n  if (Array.isArray(value)) {\n    value.forEach((arrValue, arrIndex) => appendField(data, arrIndex.toString(), arrValue, name));\n    return data;\n  }\n\n  if (typeof value === 'object') {\n    Object.keys(value).forEach((key) => appendField(data, key, value[key], name));\n    return data;\n  }\n\n  if (typeof value === 'boolean') {\n    value = Number(value);\n  }\n\n  if (value == null) {\n    value = '';\n  }\n\n  data.set(name, value);\n\n  return data;\n}\n","import { type PropType, nextTick, provide, defineComponent, h, type SlotsType, inject, computed, mergeProps } from 'vue';\nimport type { Method } from '../../Http/Client/Request';\nimport type { Response } from '../../Http/Client/Response';\nimport { CompleteResponse } from '../../Http/Client/Response';\nimport { useHttpClient } from '../../Composables/UseHttpClient';\nimport { createFormContext, FormContextInjectionKey, type FormContextInterface } from '../../Services/FormContext';\nimport { useErrors } from '../../Services/StateManager.ts';\nimport { url } from '../../Support/Url.ts';\nimport lodashMerge from 'lodash.merge';\nimport { buildFormData } from '../../Support/FormData.ts';\n\ntype FormHandler = (data: any, ctx: FormContextInterface) => Promise<any>;\n\nexport const FormControllerComponent = defineComponent({\n  name: 'FormController',\n  props: {\n    action: {\n      type: String,\n      required: false,\n    },\n    method: {\n      type: String as PropType<Method>,\n      required: false,\n      default: 'POST',\n    },\n    data: {\n      type: Object,\n      required: false,\n      default: {},\n    },\n    readonly: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    continuous: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    bag: {\n      type: String,\n      required: false,\n      default: 'default',\n    },\n    onSubmit: {\n      type: Function as PropType<FormHandler>,\n      required: false,\n    },\n  },\n  slots: Object as SlotsType<{\n    default: {\n      data: any\n      processing: boolean,\n      errors: Record<string, string[]>,\n      touched: Record<string, boolean>,\n      ctx: FormContextInterface,\n      submit: () => void,\n    },\n  }>,\n  setup(props, { attrs, slots, expose }) {\n    const parent = inject(FormContextInjectionKey, null);\n\n    const ctx = createFormContext(() => props.data, () => props.bag, () => props.readonly);\n    const http = useHttpClient();\n    const bags = useErrors();\n\n    const { data, files, processing, readonly, errors, touched } = ctx;\n\n    const element = computed(() => {\n      return parent ? 'div' : 'form';\n    });\n\n    const specific = computed(() => {\n      return parent ? {\n        ['data-action']: props.action,\n        ['data-method']: props.method,\n      } : {\n        ['action']: props.action,\n        ['method']: props.method,\n      };\n    });\n\n    function dispatch() {\n      if (props.onSubmit) {\n        return props.onSubmit(data.value, ctx);\n      }\n\n      if (!props.action) {\n        throw new Error('You must either provide action or your custom form handler!');\n      }\n\n      if (props.method === 'GET') {\n        return http.dispatch(props.method, url(props.action, data.value));\n      }\n\n      let method = props.method;\n      let fields = lodashMerge(data.value, files.value);\n\n      // When files are defined in the form, convert form data from JSON into\n      // FormData. This allows the form to be sent as \"multipart/form-data\",\n      // which supports files upload.\n      if (Object.keys(files.value).length > 0) {\n        // When form method isn't POST implement a method spoofing mechanism\n        // supported by Laravel. This allows the framework to treat, for example,\n        // a POST request as PATCH. It's due to the specific of PHP as it only\n        // allows file uploads within the POST method.\n        if (method !== 'POST') {\n          fields._method = props.method;\n          method = 'POST';\n        }\n\n        fields = buildFormData(fields);\n      }\n\n      return http.dispatch(method, props.action, { data: fields });\n    }\n\n    function submit(event?: Event) {\n      let beforeReadonly = readonly.value;\n\n      if (event) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n\n      processing.value = true;\n\n      if (!props.continuous) {\n        readonly.value = true;\n      }\n\n      bags.value = {};\n      touched.value = {};\n\n      // noinspection JSIgnoredPromiseFromCall\n      nextTick(() => {\n        dispatch().catch((error: Response | CompleteResponse) => {\n          if (error instanceof CompleteResponse) {\n            bags.value = error.errors;\n\n            if (!props.continuous) {\n              nextTick(() => {\n                document.querySelector('.control--error')?.scrollIntoView();\n              });\n            }\n          }\n        }).finally(() => {\n          processing.value = false;\n          readonly.value = beforeReadonly;\n        });\n      });\n    }\n\n    function handleSubmit(event: Event) {\n      event.stopPropagation();\n      event.preventDefault();\n\n      submit();\n    }\n\n    function onKeydown(event: KeyboardEvent) {\n      if (event.key === 'Enter') {\n        const target = event.target as HTMLElement;\n\n        if (target.tagName !== 'TEXTAREA' && !(target as HTMLInputElement).form && element.value === 'div') {\n          handleSubmit(event);\n        }\n      }\n    }\n\n    const eventHandlers = computed(() => {\n      let handlers = {} as any;\n\n      if (element.value === 'form') {\n        handlers = { onSubmit: handleSubmit };\n      } else if (element.value === 'div') {\n        handlers = { onKeydown };\n      }\n\n      if (props.continuous) {\n        handlers.onChange = handleSubmit;\n      }\n\n      return handlers;\n    });\n\n    expose({\n      ctx,\n      submit,\n    });\n\n    provide(FormContextInjectionKey, ctx);\n\n    return () => h(element.value, mergeProps(attrs, specific.value, eventHandlers.value, { class: 'form' }), slots.default({\n      data: data.value,\n      processing: processing.value,\n      errors: errors.value,\n      touched: touched.value,\n      ctx,\n      submit,\n    }));\n  },\n});\n","import { type InjectionKey, type Ref } from 'vue';\nimport { type ViewResolver } from '../Types/ViewResolver';\nimport { type StackedViewResolved } from '../Types/StackedView';\n\nexport const StackedViewResolverInjectionKey = Symbol('ViewResolver') as InjectionKey<ViewResolver>;\nexport const StackedViewInjectionKey = Symbol('StackedView') as InjectionKey<Ref<StackedViewResolved | undefined>>;\nexport const StackedViewDepthInjectionKey = Symbol('StackedViewDepth') as InjectionKey<Ref<number>>;\nexport const StackedViewParentInjectionKey = Symbol('StackedViewParent') as InjectionKey<Ref<StackedViewResolved | undefined>>;\nexport const StackedViewLocationInjectionKey = Symbol('StackedViewLocation') as InjectionKey<Ref<string | undefined>>;\nexport const StackedViewQueryInjectionKey = Symbol('StackedViewQuery') as InjectionKey<Ref<Record<string, any> | undefined>>;\n","export function wrap<T>(item: T): T[] & any[] {\n  return Array.isArray(item) ? item : [item];\n}\n","import { inject } from 'vue';\nimport { StackedViewResolverInjectionKey } from '../Services/StackedView';\nimport type { ViewResolver } from '../Types/ViewResolver';\n\nexport function useViewResolver(): ViewResolver {\n  const resolver = inject(StackedViewResolverInjectionKey);\n\n  if (!resolver) {\n    throw new Error('You\\'re trying to get ViewResolver ouf of Router context!');\n  }\n\n  return resolver;\n}\n","import { inject, type Ref, type InjectionKey } from 'vue';\nimport { StackedViewInjectionKey } from '../Services/StackedView';\nimport { type StackedViewResolved } from '../Types/StackedView';\n\nexport const PreventNestedRouterViewRenderInjectionKey = Symbol('PreventNestedRouterViewRenderInjectionKey') as InjectionKey<boolean>;\n\nexport function isNestedRouterViewPrevented(): boolean {\n  return inject(PreventNestedRouterViewRenderInjectionKey, false);\n}\n\nexport function useViewStack(): Ref<StackedViewResolved | undefined> {\n  const view = inject(StackedViewInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get stacked view out of Router context!');\n  }\n\n  return view;\n}\n","import { inject, type Ref } from 'vue';\nimport { StackedViewDepthInjectionKey } from '../Services/StackedView';\n\nexport function useViewDepth(): Ref<number> {\n  const view = inject(StackedViewDepthInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get view depth out of Router context!');\n  }\n\n  return view;\n}\n","import { inject, type InjectionKey, type ConcreteComponent } from 'vue';\n\nexport const StackedViewLayoutInjectionKey = Symbol('StackedViewLayoutInjectionKey') as InjectionKey<ConcreteComponent | string | undefined>;\n\nexport function useStackLayout(): ConcreteComponent | string | undefined {\n  return inject(StackedViewLayoutInjectionKey, () => undefined);\n}\n","import { defineComponent, provide, h, type PropType, computed, type SlotsType } from 'vue';\nimport { StackedViewInjectionKey, StackedViewQueryInjectionKey, StackedViewLocationInjectionKey, StackedViewDepthInjectionKey, StackedViewParentInjectionKey } from '../../Services/StackedView';\nimport { wrap } from '../../Support/Wrap';\nimport { useViewResolver } from '../../Composables/UseViewResolver';\nimport { useViewStack, isNestedRouterViewPrevented } from '../../Composables/UseViewStack';\nimport { useViewDepth } from '../../Composables/UseViewDepth';\nimport type { StackedViewResolved } from '../../Types/StackedView';\nimport { useStackLayout } from '../../Composables/UseStackLayout.ts';\nimport { HttpClientScrollHandler } from '../../Composables/UseHttpClient.ts';\n\nexport const RouterViewComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'RouterView',\n  props: {\n    allowLayouts: {\n      type: Boolean as PropType<boolean>,\n      required: false,\n      default: true,\n    },\n  },\n  slots: Object as SlotsType<{\n    default?: () => any,\n  }>,\n  setup(props, { slots }) {\n    const resolver = useViewResolver();\n    const defaultLayout = useStackLayout();\n    const depth = useViewDepth();\n    const view = useViewStack();\n    const prevented = isNestedRouterViewPrevented();\n\n    const location = computed(() => view.value?.location);\n    const query = computed(() => view.value?.query);\n\n    const stack = computed(() => {\n      if (view.value && view.value.child) {\n        return { ...view.value.child, parent: view.value } satisfies StackedViewResolved;\n      } else {\n        return undefined;\n      }\n    });\n\n    provide(StackedViewInjectionKey, stack);\n    provide(StackedViewDepthInjectionKey, computed(() => depth.value + 1));\n    provide(StackedViewParentInjectionKey, computed(() => view.value?.parent));\n    provide(StackedViewLocationInjectionKey, location);\n    provide(StackedViewQueryInjectionKey, query);\n\n    provide(HttpClientScrollHandler, () => {\n      document.body.scroll({ behavior: 'instant', left: 0, top: 0 });\n    });\n\n    if (prevented) {\n      return () => null;\n    }\n\n    return () => {\n      if (view.value && 'component' in view.value) {\n        let component = resolver(view.value.component);\n        let viewProps = view.value.props;\n\n        component.inheritAttrs = !!component.inheritAttrs;\n\n        let children = h(component, viewProps);\n\n        if (depth.value === 0 && component.layout === undefined) {\n          component.layout = defaultLayout;\n        }\n\n        if (props.allowLayouts && component.layout) {\n          children = wrap(component.layout).concat(children).reverse().reduce((child, layout) => {\n            layout = typeof layout === 'string' ? resolver(layout) : layout;\n\n            layout.inheritAttrs = !!layout.inheritAttrs;\n\n            return h(layout, viewProps, () => child);\n          });\n        }\n\n        return children;\n      }\n\n      if (slots.default) {\n        return slots.default();\n      }\n    };\n  },\n});\n","import { defineComponent, ref, computed, h, type PropType, nextTick, mergeProps } from 'vue';\nimport { type Body, type Method } from '../../Http/Client/Request';\nimport { useLocation } from '../../Services/StateManager';\nimport { useHttpClient } from '../../Composables/UseHttpClient';\n\nexport const RouterLinkComponent = defineComponent({\n  name: 'RouterLink',\n  props: {\n    method: { type: String as PropType<Method>, required: false, default: 'GET' },\n    href: { type: String as PropType<string | null | undefined>, required: false },\n    data: { type: [Object, Array, String, null] as PropType<Body>, required: false },\n    preserveScroll: { type: Boolean, required: false },\n    replace: { type: Boolean, required: false },\n    target: { type: String as PropType<string>, required: false },\n    disabled: { type: Boolean, required: false },\n    explicit: { type: Boolean, required: false },\n  },\n  setup(props, { attrs, slots }) {\n    const location = useLocation();\n    const http = useHttpClient();\n    const pending = ref(false);\n\n    const active = computed(() => {\n      let current = location.value.replace(/\\/$/, '');\n      let target = props.href?.replace(/\\/$/, '');\n      let explicit = current === target;\n      let implicit = (!props.explicit && target && location.value.startsWith(target));\n\n      return explicit || implicit;\n    });\n\n    const as = computed(() => props.href ? 'a' : 'button');\n    const specific = computed(() => props.href ? { target: props.target } : { disabled: props.disabled });\n\n    function onClick(event: MouseEvent) {\n      if (!props.href || !shouldInterceptEvent(event, props.href, props.target)) {\n        return;\n      }\n\n      if (event.defaultPrevented) {\n        event.preventDefault();\n        return;\n      }\n\n      event.preventDefault();\n\n      if (props.disabled) {\n        return;\n      }\n\n      let { method, href, data, preserveScroll, replace } = props;\n\n      pending.value = true;\n\n      // noinspection JSIgnoredPromiseFromCall\n      nextTick(() => {\n        http.dispatch(method, href, { data, preserveScroll, replace }).then(() => {\n          pending.value = false;\n        }).catch(() => {\n          pending.value = false;\n        });\n      });\n    }\n\n    return () => h(\n      as.value,\n      mergeProps(attrs, specific.value, {\n        href: props.href,\n        class: [{ active: active.value, pending: pending.value, disabled: props.disabled }],\n        onClick,\n      }),\n      // @ts-ignore\n      slots.default({ active, pending }),\n    );\n  },\n});\n\nfunction shouldInterceptEvent(event: MouseEvent, href: string, target?: string) {\n  if (target === '_blank' || isCrossOriginHref(href)) {\n    return false;\n  }\n\n  return !(\n    event.button > 1 ||\n    event.altKey ||\n    event.ctrlKey ||\n    event.metaKey ||\n    event.shiftKey\n  );\n}\n\nfunction isCrossOriginHref(href: string) {\n  try {\n    let currentOrigin = window.location.host;\n    let targetOrigin = new URL(href).host;\n\n    return currentOrigin !== targetOrigin;\n  } catch (e) {\n    return false;\n  }\n}\n","import { type InjectionKey, inject, type Ref } from 'vue';\nimport type { ToastRegistry } from '../Types/Toast';\n\nexport const ToastRegistryInjectionKey = Symbol('ToastRegistry') as InjectionKey<Ref<ToastRegistry>>;\n\nexport function useToasts() {\n  let toasts = inject(ToastRegistryInjectionKey);\n\n  if (!toasts) {\n    throw new Error('Toasts are used out of router context!');\n  }\n\n  return toasts;\n}\n","import { defineComponent, type SlotsType, onMounted, ref, nextTick, h } from 'vue';\nimport { useHttpClient } from '../../Composables/UseHttpClient.ts';\nimport { RouterViewComponent } from './RouterViewComponent.ts';\n\nexport const RouterNestedViewComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'RouterNestedView',\n  props: {\n    action: { type: String, required: true },\n  },\n  slots: Object as SlotsType<{\n    default?: () => any,\n  }>,\n  setup(props, { slots }) {\n    const http = useHttpClient();\n    const loading = ref(true);\n\n    onMounted(() => {\n      http.dispatch('GET', props.action).then(() => nextTick(() => {\n        loading.value = false;\n      }));\n    });\n\n    return () => {\n      if (loading.value) {\n        if (slots.default) {\n          return slots.default();\n        }\n      } else {\n        return h(RouterViewComponent);\n      }\n    };\n  },\n});\n","import { defineComponent, provide, h, ref, toValue, toRaw, computed, inject, type Ref, type SlotsType, nextTick } from 'vue';\nimport { type State, type Abilities, type ViewErrorsBag } from '../../Types/State';\nimport { type StackedViewResolved } from '../../Types/StackedView';\nimport { type CompleteResponse } from '../../Http/Client/Response';\nimport { StackedViewInjectionKey, StackedViewDepthInjectionKey } from '../../Services/StackedView';\nimport { StateLocationInjectionKey, StateManagerInjectionKey, StateStackSignatureInjectionKey, updateStack, StateAuthenticated, StateAbilities, StateHistoryInjectionKey, StateShared, StateErrorsInjectionKey } from '../../Services/StateManager';\nimport { ToastRegistryInjectionKey } from '../../Services/ToastManager';\nimport { HttpClientForceScrollPreservation, HttpClientForceNested } from '../../Composables/UseHttpClient';\nimport { RouterNestedViewComponent } from './RouterNestedViewComponent';\n\n\nexport const RouterNestedComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'RouterNested',\n  props: {\n    action: { type: String, required: true },\n  },\n  slots: Object as SlotsType<{\n    default?: () => any,\n  }>,\n  setup(props, { slots }) {\n    const location = ref(props.action);\n    const abilities = ref(undefined) as unknown as Ref<Abilities>;\n    const stack = ref(undefined) as unknown as Ref<StackedViewResolved>;\n    const signature = ref(undefined) as unknown as Ref<string>;\n    const errors = ref({}) as Ref<ViewErrorsBag>;\n\n    const shared = inject(StateShared)!;\n    const authenticated = inject(StateAuthenticated)!;\n    const toasts = inject(ToastRegistryInjectionKey)!;\n\n    function buildState() {\n      return {\n        location: toRaw(toValue(location)),\n        signature: toRaw(toValue(signature)),\n        stack: toRaw(toValue(stack)),\n      };\n    }\n\n    async function update(fresh: CompleteResponse): Promise<State> {\n      return await nextTick(async () => {\n        abilities.value = { ...abilities.value, ...fresh.abilities };\n        authenticated.value = fresh.authenticated;\n        errors.value = fresh.errors;\n\n        if (fresh.location) location.value = fresh.location;\n        if (fresh.stack) stack.value = updateStack(toRaw(toValue(stack.value)), fresh.stack);\n        if (fresh.signature) signature.value = fresh.signature;\n\n        return await nextTick(() => {\n          if (fresh.shared) shared.value = { ...shared.value, ...fresh.shared };\n          if (fresh.toasts && fresh.toasts.length > 0) toasts.value = [...toasts.value, ...fresh.toasts];\n\n          return buildState();\n        });\n      });\n    }\n\n    provide(StateAbilities, abilities);\n    provide(StateAuthenticated, authenticated);\n    provide(StateErrorsInjectionKey, errors);\n    provide(StateLocationInjectionKey, location);\n    provide(StackedViewInjectionKey, stack);\n    provide(StateStackSignatureInjectionKey, signature);\n    provide(StateShared, shared);\n    provide(ToastRegistryInjectionKey, toasts);\n    provide(StateManagerInjectionKey, update);\n    provide(StackedViewDepthInjectionKey, computed(() => 0));\n    provide(HttpClientForceScrollPreservation, true);\n    provide(HttpClientForceNested, true);\n\n    provide(StateHistoryInjectionKey, {\n      historyPushState() {\n        // Nothing to do, we don't handle history in nested routers.\n      },\n      historyReplaceState() {\n        // Nothing to do, we don't handle history in nested routers.\n      },\n    });\n\n    return () => {\n      return h(RouterNestedViewComponent, { action: props.action }, slots);\n    };\n  },\n});\n","import { defineComponent, provide, h, ref, nextTick, toValue, toRaw, inject, type Ref, type SlotsType, onMounted, watch } from 'vue';\nimport lodashMerge from 'lodash.merge';\nimport { type StackedViewResolved } from '../../Types/StackedView';\nimport { updateStack, StateAuthenticated, StateAbilities, StateShared, StateErrorsInjectionKey } from '../../Services/StateManager';\nimport { ToastRegistryInjectionKey } from '../../Services/ToastManager';\nimport { HttpClientForceScrollPreservation, HttpClientForceNested } from '../../Composables/UseHttpClient';\nimport { Request } from '../../Http/Client/Request.ts';\nimport { EventBus } from '../../Events/EventBus.ts';\nimport { ErrorModal } from '../../Support/ErrorModal.ts';\nimport { useViewResolver } from '../../Composables/UseViewResolver.ts';\nimport { StackedViewInjectionKey } from '../../Services/StackedView.ts';\nimport { PreventNestedRouterViewRenderInjectionKey } from '../../Composables/UseViewStack.ts';\n\n\nexport const RouterFrameComponent = defineComponent({\n    inheritAttrs: false,\n    name: 'RouterFrame',\n    props: {\n      src: { type: String, required: true },\n    },\n    slots: Object as SlotsType<{\n      default?: () => any,\n    }>,\n    setup(props, { slots }) {\n      const resolver = useViewResolver();\n\n      const abilities = inject(StateAbilities)!;\n      const authenticated = inject(StateAuthenticated)!;\n      const shared = inject(StateShared)!;\n      const errors = inject(StateErrorsInjectionKey)!;\n      const toasts = inject(ToastRegistryInjectionKey)!;\n      const stack = inject(StackedViewInjectionKey)!;\n\n      const loading = ref(true);\n      const view = ref(undefined) as unknown as Ref<StackedViewResolved>;\n\n      provide(HttpClientForceScrollPreservation, true);\n      provide(HttpClientForceNested, true);\n      provide(PreventNestedRouterViewRenderInjectionKey, true);\n\n      function load() {\n        Request.send({ method: 'GET', url: props.src, nested: true }).then(async (response) => {\n          if (response.redirect) {\n            return new Promise(() => {\n              window.location.href = response.redirect.target;\n            });\n          }\n\n          abilities.value = { ...abilities.value, ...response.abilities };\n          authenticated.value = response.authenticated;\n          errors.value = { ...lodashMerge(errors.value, response.errors) };\n\n          if (response.shared) {\n            shared.value = { ...shared.value, ...response.shared };\n          }\n\n          if (response.stack) {\n            view.value = updateStack(toRaw(toValue(view.value)), response.stack);\n          }\n\n          if (response.toasts && response.toasts.length > 0) {\n            toasts.value = [...toasts.value, ...response.toasts];\n          }\n\n          await nextTick();\n\n          return Promise.resolve(response);\n        }).catch(async (error) => {\n          if (error.status === 423) {\n            EventBus.dispatch('password.confirm', { method: 'GET', url: props.src, options: { data: undefined, preserveScroll: true, replace: false } });\n\n            return Promise.reject(error);\n          }\n\n          console.error(error);\n\n          if (APP_DEBUG && error.content) {\n            ErrorModal.show(error.content);\n          }\n\n          return Promise.reject(error);\n        }).finally(() => {\n          loading.value = false;\n        });\n      }\n\n      onMounted(() => {\n        load();\n      });\n\n      watch(stack, () => {\n        load();\n      }, {\n        deep: true,\n      });\n\n      return () => {\n        if (view.value && 'component' in view.value) {\n          let component = resolver(view.value.component);\n          let viewProps = view.value.props;\n\n          component.inheritAttrs = !!component.inheritAttrs;\n\n          return h(component, viewProps);\n        }\n\n        if (slots.default) {\n          return slots.default();\n        }\n      };\n    },\n  })\n;\n","import { defineComponent, type SlotsType, h, type PropType, onMounted, ref, onBeforeUnmount } from 'vue';\nimport type { ToastRegistry, Toast } from '../../Types/Toast';\nimport { useToasts } from '../../Services/ToastManager';\n\nexport const ToastControllerComponent = defineComponent({\n  name: 'ToastController',\n\n  slots: Object as SlotsType<{\n    default: { toasts: ToastRegistry },\n  }>,\n\n  // _props is a hack to avoid TS error on unused parameter as it is not used\n  // at the moment it will throw a TS error, but it has to be passed to read\n  // slots and attrs. Remember _ in front whenever you will actually have to\n  // use the props. https://github.com/microsoft/TypeScript/issues/9458\n  setup(_props, { slots, attrs }) {\n    const toasts = useToasts();\n\n    return () => h('div', attrs, slots.default({ toasts: toasts.value }));\n  },\n});\n\nexport const ToastComponent = defineComponent({\n  name: 'Toast',\n  props: {\n    toast: { type: Object as PropType<Toast>, required: true },\n  },\n  slots: Object as SlotsType<{\n    default: { toast: Toast, close: () => void },\n  }>,\n  setup(props, { slots, attrs }) {\n    const toasts = useToasts();\n    const timeout = ref();\n\n    function close() {\n      clearTimeout(timeout.value);\n      toasts.value = toasts.value.filter((toast) => toast.id !== props.toast.id);\n    }\n\n    onMounted(() => {\n      timeout.value = setTimeout(() => close(), props.toast.duration * 1000);\n    });\n\n    onBeforeUnmount(() => {\n      clearTimeout(timeout.value);\n    });\n\n    return () => h('li', attrs, slots.default({ toast: props.toast, close }));\n  },\n});\n","import { defineComponent, type SlotsType, h, ref, onMounted, onBeforeUnmount, nextTick } from 'vue';\nimport { EventBus } from '../../Events/EventBus';\nimport { useHttpClient } from '../../Composables/UseHttpClient';\n\nexport const PasswordConfirmationControllerComponent = defineComponent({\n  name: 'PasswordConfirmationController',\n  props: {\n    action: { type: String, required: true },\n  },\n  slots: Object as SlotsType<{\n    default: { open: boolean, submit: (data: any) => void, cancel: () => void },\n  }>,\n  setup(props, { slots, attrs }) {\n    const http = useHttpClient();\n    const original = ref();\n    const open = ref(false);\n\n    function onPasswordConfirm(event: any) {\n      original.value = event;\n      open.value = true;\n    }\n\n    async function submit(data: any) {\n      let { method, url, options } = original.value;\n\n      return await http.post(props.action, data).then(async () => {\n        return await http.dispatch(method, url, options).then(async (res: unknown) => {\n          cancel();\n          return await nextTick(() => res);\n        });\n      });\n    }\n\n    function cancel() {\n      open.value = false;\n      original.value = undefined;\n    }\n\n    onMounted(() => {\n      EventBus.addEventListener('password.confirm', onPasswordConfirm);\n    });\n\n    onBeforeUnmount(() => {\n      EventBus.removeEventListener('password.confirm', onPasswordConfirm);\n    });\n\n    return () => h('div', attrs, slots.default({ open: open.value, submit, cancel }));\n  },\n});\n","export type Locale = {\n  name: string,\n  code: string,\n}\n\nexport function trans(key: string, replace?: Record<string, string | number | boolean>) {\n  return makeReplacements(get(key), replace);\n}\n\nexport function transChoice(key: string, number: number, replace?: Record<string, string | number | boolean>) {\n  return makeReplacements(choose(get(key), number), replace);\n}\n\nfunction get(key: string): string {\n  let translation = APP_TRANSLATIONS[key];\n\n  if (typeof translation === 'undefined') {\n    translation = key;\n  }\n\n  return translation;\n}\n\nfunction choose(line: string, number: number): string {\n  let segments = line.split('|');\n  let value = extract(segments, number);\n\n  if (value) {\n    return value.trim();\n  }\n\n  segments = stripConditions(segments);\n  let pluralIndex = getPluralIndex(number);\n\n  if (segments.length === 1 || segments[pluralIndex] == undefined) {\n    return segments[0]!;\n  }\n\n  return segments[pluralIndex];\n}\n\nfunction extract(segments: string[], number: number) {\n  for (let part in segments) {\n    let line = extractFromString(part, number);\n\n    if (line) {\n      return line;\n    }\n  }\n}\n\nfunction extractFromString(part: string, number: number) {\n  const regex = /^[\\{\\[]([^\\[\\]\\{\\}]*)[\\}\\]](.*)/s;\n  const matches = part.match(regex);\n\n  if (!matches || matches.length !== 3) {\n    return null;\n  }\n\n  const condition = matches[1]!;\n  const value = matches[2]!;\n\n  if (condition.includes(',')) {\n    const [from, to] = condition.split(',', 2);\n\n    if (to === '*' && number >= Number(from)) {\n      return value;\n    } else if (from === '*' && number <= Number(to)) {\n      return value;\n    } else if (number >= Number(from) && number <= Number(to)) {\n      return value;\n    }\n  }\n\n  return Number(condition) == number ? value : null;\n}\n\nfunction stripConditions(segments: string[]) {\n  return segments.map(part => part.replace(/^[\\{\\[]([^\\[\\]\\{\\}]*)[\\}\\]]/, ''));\n}\n\nfunction makeReplacements(line: string, replace?: Record<string, string | number | boolean>) {\n  if (replace) {\n    return Object.keys(replace).reduce((prev, key) => prev.replace(`:${key}`, replace[key]!.toString()), line);\n  }\n\n  return line;\n}\n\nfunction getPluralIndex(number: number) {\n  switch (APP_LOCALE) {\n    case 'az':\n    case 'az_AZ':\n    case 'bo':\n    case 'bo_CN':\n    case 'bo_IN':\n    case 'dz':\n    case 'dz_BT':\n    case 'id':\n    case 'id_ID':\n    case 'ja':\n    case 'ja_JP':\n    case 'jv':\n    case 'ka':\n    case 'ka_GE':\n    case 'km':\n    case 'km_KH':\n    case 'kn':\n    case 'kn_IN':\n    case 'ko':\n    case 'ko_KR':\n    case 'ms':\n    case 'ms_MY':\n    case 'th':\n    case 'th_TH':\n    case 'tr':\n    case 'tr_CY':\n    case 'tr_TR':\n    case 'vi':\n    case 'vi_VN':\n    case 'zh':\n    case 'zh_CN':\n    case 'zh_HK':\n    case 'zh_SG':\n    case 'zh_TW':\n      return 0;\n    case 'af':\n    case 'af_ZA':\n    case 'bn':\n    case 'bn_BD':\n    case 'bn_IN':\n    case 'bg':\n    case 'bg_BG':\n    case 'ca':\n    case 'ca_AD':\n    case 'ca_ES':\n    case 'ca_FR':\n    case 'ca_IT':\n    case 'da':\n    case 'da_DK':\n    case 'de':\n    case 'de_AT':\n    case 'de_BE':\n    case 'de_CH':\n    case 'de_DE':\n    case 'de_LI':\n    case 'de_LU':\n    case 'el':\n    case 'el_CY':\n    case 'el_GR':\n    case 'en':\n    case 'en_AG':\n    case 'en_AU':\n    case 'en_BW':\n    case 'en_CA':\n    case 'en_DK':\n    case 'en_GB':\n    case 'en_HK':\n    case 'en_IE':\n    case 'en_IN':\n    case 'en_NG':\n    case 'en_NZ':\n    case 'en_PH':\n    case 'en_SG':\n    case 'en_US':\n    case 'en_ZA':\n    case 'en_ZM':\n    case 'en_ZW':\n    case 'eo':\n    case 'eo_US':\n    case 'es':\n    case 'es_AR':\n    case 'es_BO':\n    case 'es_CL':\n    case 'es_CO':\n    case 'es_CR':\n    case 'es_CU':\n    case 'es_DO':\n    case 'es_EC':\n    case 'es_ES':\n    case 'es_GT':\n    case 'es_HN':\n    case 'es_MX':\n    case 'es_NI':\n    case 'es_PA':\n    case 'es_PE':\n    case 'es_PR':\n    case 'es_PY':\n    case 'es_SV':\n    case 'es_US':\n    case 'es_UY':\n    case 'es_VE':\n    case 'et':\n    case 'et_EE':\n    case 'eu':\n    case 'eu_ES':\n    case 'eu_FR':\n    case 'fa':\n    case 'fa_IR':\n    case 'fi':\n    case 'fi_FI':\n    case 'fo':\n    case 'fo_FO':\n    case 'fur':\n    case 'fur_IT':\n    case 'fy':\n    case 'fy_DE':\n    case 'fy_NL':\n    case 'gl':\n    case 'gl_ES':\n    case 'gu':\n    case 'gu_IN':\n    case 'ha':\n    case 'ha_NG':\n    case 'he':\n    case 'he_IL':\n    case 'hu':\n    case 'hu_HU':\n    case 'is':\n    case 'is_IS':\n    case 'it':\n    case 'it_CH':\n    case 'it_IT':\n    case 'ku':\n    case 'ku_TR':\n    case 'lb':\n    case 'lb_LU':\n    case 'ml':\n    case 'ml_IN':\n    case 'mn':\n    case 'mn_MN':\n    case 'mr':\n    case 'mr_IN':\n    case 'nah':\n    case 'nb':\n    case 'nb_NO':\n    case 'ne':\n    case 'ne_NP':\n    case 'nl':\n    case 'nl_AW':\n    case 'nl_BE':\n    case 'nl_NL':\n    case 'nn':\n    case 'nn_NO':\n    case 'no':\n    case 'om':\n    case 'om_ET':\n    case 'om_KE':\n    case 'or':\n    case 'or_IN':\n    case 'pa':\n    case 'pa_IN':\n    case 'pa_PK':\n    case 'pap':\n    case 'pap_AN':\n    case 'pap_AW':\n    case 'pap_CW':\n    case 'ps':\n    case 'ps_AF':\n    case 'pt':\n    case 'pt_BR':\n    case 'pt_PT':\n    case 'so':\n    case 'so_DJ':\n    case 'so_ET':\n    case 'so_KE':\n    case 'so_SO':\n    case 'sq':\n    case 'sq_AL':\n    case 'sq_MK':\n    case 'sv':\n    case 'sv_FI':\n    case 'sv_SE':\n    case 'sw':\n    case 'sw_KE':\n    case 'sw_TZ':\n    case 'ta':\n    case 'ta_IN':\n    case 'ta_LK':\n    case 'te':\n    case 'te_IN':\n    case 'tk':\n    case 'tk_TM':\n    case 'ur':\n    case 'ur_IN':\n    case 'ur_PK':\n    case 'zu':\n    case 'zu_ZA':\n      return (number == 1) ? 0 : 1;\n    case 'am':\n    case 'am_ET':\n    case 'bh':\n    case 'fil':\n    case 'fil_PH':\n    case 'fr':\n    case 'fr_BE':\n    case 'fr_CA':\n    case 'fr_CH':\n    case 'fr_FR':\n    case 'fr_LU':\n    case 'gun':\n    case 'hi':\n    case 'hi_IN':\n    case 'hy':\n    case 'hy_AM':\n    case 'ln':\n    case 'ln_CD':\n    case 'mg':\n    case 'mg_MG':\n    case 'nso':\n    case 'nso_ZA':\n    case 'ti':\n    case 'ti_ER':\n    case 'ti_ET':\n    case 'wa':\n    case 'wa_BE':\n    case 'xbr':\n      return ((number == 0) || (number == 1)) ? 0 : 1;\n    case 'be':\n    case 'be_BY':\n    case 'bs':\n    case 'bs_BA':\n    case 'hr':\n    case 'hr_HR':\n    case 'ru':\n    case 'ru_RU':\n    case 'ru_UA':\n    case 'sr':\n    case 'sr_ME':\n    case 'sr_RS':\n    case 'uk':\n    case 'uk_UA':\n      return ((number % 10 == 1) && (number % 100 != 11)) ? 0 : (((number % 10 >= 2) && (number % 10 <= 4) && ((number % 100 < 10) || (number % 100 >= 20))) ? 1 : 2);\n    case 'cs':\n    case 'cs_CZ':\n    case 'sk':\n    case 'sk_SK':\n      return (number == 1) ? 0 : (((number >= 2) && (number <= 4)) ? 1 : 2);\n    case 'ga':\n    case 'ga_IE':\n      return (number == 1) ? 0 : ((number == 2) ? 1 : 2);\n    case 'lt':\n    case 'lt_LT':\n      return ((number % 10 == 1) && (number % 100 != 11)) ? 0 : (((number % 10 >= 2) && ((number % 100 < 10) || (number % 100 >= 20))) ? 1 : 2);\n    case 'sl':\n    case 'sl_SI':\n      return (number % 100 == 1) ? 0 : ((number % 100 == 2) ? 1 : (((number % 100 == 3) || (number % 100 == 4)) ? 2 : 3));\n    case 'mk':\n    case 'mk_MK':\n      return (number % 10 == 1) ? 0 : 1;\n    case 'mt':\n    case 'mt_MT':\n      return (number == 1) ? 0 : (((number == 0) || ((number % 100 > 1) && (number % 100 < 11))) ? 1 : (((number % 100 > 10) && (number % 100 < 20)) ? 2 : 3));\n    case 'lv':\n    case 'lv_LV':\n      return (number == 0) ? 0 : (((number % 10 == 1) && (number % 100 != 11)) ? 1 : 2);\n    case 'pl':\n    case 'pl_PL':\n      return (number == 1) ? 0 : (((number % 10 >= 2) && (number % 10 <= 4) && ((number % 100 < 12) || (number % 100 > 14))) ? 1 : 2);\n    case 'cy':\n    case 'cy_GB':\n      return (number == 1) ? 0 : ((number == 2) ? 1 : (((number == 8) || (number == 11)) ? 2 : 3));\n    case 'ro':\n    case 'ro_RO':\n      return (number == 1) ? 0 : (((number == 0) || ((number % 100 > 0) && (number % 100 < 20))) ? 1 : 2);\n    case 'ar':\n    case 'ar_AE':\n    case 'ar_BH':\n    case 'ar_DZ':\n    case 'ar_EG':\n    case 'ar_IN':\n    case 'ar_IQ':\n    case 'ar_JO':\n    case 'ar_KW':\n    case 'ar_LB':\n    case 'ar_LY':\n    case 'ar_MA':\n    case 'ar_OM':\n    case 'ar_QA':\n    case 'ar_SA':\n    case 'ar_SD':\n    case 'ar_SS':\n    case 'ar_SY':\n    case 'ar_TN':\n    case 'ar_YE':\n      return (number == 0) ? 0 : ((number == 1) ? 1 : ((number == 2) ? 2 : (((number % 100 >= 3) && (number % 100 <= 10)) ? 3 : (((number % 100 >= 11) && (number % 100 <= 99)) ? 4 : 5))));\n    default:\n      return 0;\n  }\n}\n","import { toRaw } from 'vue';\nimport { url } from './Url';\n\ntype Params = Record<string, any>;\n\nexport type Route = {\n  uri: string;\n  domain: string;\n  params: string[];\n  binding: Record<string, string>;\n}\n\nexport function route(name: string, params: Params = {}, hash?: string) {\n  return build(localizeName(name), params, hash);\n}\n\n\nfunction localizeName(name: string) {\n  if (name.startsWith(APP_FALLBACK_LOCALE)) {\n    return name.replace(`${APP_FALLBACK_LOCALE}.`, '');\n  }\n\n  if (APP_AVAILABLE_LOCALES.findIndex(lang => name.startsWith(lang)) >= 0) {\n    return name;\n  }\n\n  if (!name.startsWith('web.')) {\n    return name;\n  }\n\n  if (APP_LOCALE !== APP_FALLBACK_LOCALE) {\n    return `${APP_LOCALE}.${name}`;\n  }\n\n  return name;\n}\n\n\nfunction build(name: string, params: Params, hash?: string) {\n  const route = APP_ROUTES[name];\n\n  if (!route) {\n    throw new Error(`Undefined route: ${name}`);\n  }\n\n  const uri = replaceRouteParameters(route, params);\n\n  const search = Object.keys(params).reduce((prev, key) => {\n    if (!route.params.includes(key)) {\n      prev[key] = toRaw(params[key]);\n    }\n\n    return prev;\n  }, {} as Record<string, any>);\n\n  return url(uri, search, hash, route.domain);\n}\n\n\nfunction replaceRouteParameters(route: Route, params: Params) {\n  return route.params.reduce((uri, param) => {\n    let binding = route.binding[param] || 'id';\n    let value = toRaw(params[param]);\n\n    if (typeof value === 'object') {\n      value = value[binding];\n    }\n\n    if (!value) {\n      if (!uri.match(new RegExp(`\\{${param}\\\\?\\}`))) {\n        throw new Error(`Parameter ${param} is required for uri ${route.uri}.`);\n      }\n    }\n\n    uri = uri.replace(new RegExp(`\\{${param}\\\\??\\}`), value ?? '');\n\n    if (uri.endsWith('/')) {\n      uri = uri.slice(0, -1);\n    }\n\n    return uri;\n  }, route.uri);\n}\n","import type { Meta } from '../Types/State.ts';\n\nexport function updateHead(meta?: Meta[]) {\n  if (!meta) {\n    return meta;\n  }\n\n  document.head.querySelectorAll('[data-fdn]').forEach((element) => element.remove());\n\n  meta.forEach((tag) => {\n    let element: HTMLElement;\n\n    switch (tag.type) {\n      case 'title':\n        element = document.createElement('title');\n        element.innerHTML = tag.content;\n        break;\n\n      case 'meta':\n        element = document.createElement('meta');\n        element.setAttribute('name', tag.name);\n        element.setAttribute('content', tag.content);\n        break;\n\n      case 'link':\n        element = document.createElement('link');\n        element.setAttribute('rel', tag.rel);\n        element.setAttribute('href', tag.href);\n        break;\n\n      case 'snippet':\n        element = document.createElement('script');\n        element.setAttribute('type', 'application/ld+json');\n        element.innerHTML = tag.content;\n        break;\n    }\n\n    element.setAttribute('data-fdn', '');\n\n    document.head.append(element);\n  });\n\n  return meta;\n}\n","import { defineComponent, type PropType, provide, h, ref, toValue, toRaw, onMounted, onBeforeUnmount, computed, nextTick } from 'vue';\nimport { type ViewResolver } from '../../Types/ViewResolver';\nimport { type State, type InitialState } from '../../Types/State';\nimport type { CompleteResponse } from '../../Http/Client/Response';\nimport { StackedViewResolverInjectionKey, StackedViewInjectionKey, StackedViewDepthInjectionKey } from '../../Services/StackedView';\nimport { StateLocationInjectionKey, StateManagerInjectionKey, StateStackSignatureInjectionKey, updateStack, StateAuthenticated, StateAbilities, StateHistoryInjectionKey, StateShared, StateErrorsInjectionKey } from '../../Services/StateManager';\nimport { RouterViewComponent } from './RouterViewComponent';\nimport { ToastRegistryInjectionKey } from '../../Services/ToastManager';\nimport { updateHead } from '../../Services/MetaManager.ts';\n\n\nexport const RouterComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'Router',\n  props: {\n    resolver: {\n      type: Function as PropType<ViewResolver>,\n      required: true,\n    },\n    state: {\n      type: Object as PropType<InitialState>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const abilities = ref(props.state.abilities);\n    const errors = ref(props.state.errors);\n    const meta = ref(props.state.meta);\n    const shared = ref(props.state.shared || {});\n    const authenticated = ref(props.state.authenticated);\n    const location = ref(props.state.location);\n    const stack = ref(props.state.stack);\n    const signature = ref(props.state.signature);\n    const toasts = ref(props.state.toasts);\n\n    function buildState() {\n      return {\n        meta: toRaw(toValue(meta)),\n        location: toRaw(toValue(location)),\n        signature: toRaw(toValue(signature)),\n        stack: toRaw(toValue(stack)),\n      };\n    }\n\n    async function update(fresh: CompleteResponse): Promise<State> {\n      return await nextTick(async () => {\n        abilities.value = { ...abilities.value, ...fresh.abilities };\n        authenticated.value = fresh.authenticated;\n        errors.value = fresh.errors;\n\n        if (fresh.meta) meta.value = updateHead(fresh.meta);\n        if (fresh.stack) stack.value = updateStack(toRaw(toValue(stack.value)), fresh.stack);\n        if (fresh.location) location.value = fresh.location;\n        if (fresh.signature) signature.value = fresh.signature;\n\n        return await nextTick(() => {\n          if (fresh.shared) shared.value = { ...shared.value, ...fresh.shared };\n          if (fresh.toasts && fresh.toasts.length > 0) toasts.value = [...toasts.value, ...fresh.toasts];\n\n          return buildState();\n        });\n      });\n    }\n\n    provide(StateAbilities, abilities);\n    provide(StateAuthenticated, authenticated);\n    provide(StateShared, shared);\n    provide(StateLocationInjectionKey, location);\n    provide(StateStackSignatureInjectionKey, signature);\n    provide(StateErrorsInjectionKey, errors);\n    provide(StateManagerInjectionKey, update);\n    provide(StackedViewResolverInjectionKey, props.resolver);\n    provide(StackedViewDepthInjectionKey, computed(() => 0));\n    provide(StackedViewInjectionKey, stack);\n    provide(ToastRegistryInjectionKey, toasts);\n    provide(StateHistoryInjectionKey, {\n      historyPushState(state: State) {\n        window.history.pushState(state, '', state.location);\n      },\n      historyReplaceState(state: State) {\n        window.history.replaceState(state, '', state.location);\n      },\n    });\n\n    function handlePopStateEvent(event: PopStateEvent) {\n      if (event.state) {\n        location.value = event.state.location;\n        stack.value = event.state.stack;\n        signature.value = event.state.signature;\n      } else {\n        window.history.replaceState(buildState(), '', location.value);\n        document.body.scroll({ behavior: 'instant', left: 0, top: 0 });\n      }\n    }\n\n    onMounted(() => {\n      window.history.replaceState(buildState(), '', location.value);\n      window.addEventListener('popstate', handlePopStateEvent);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('popstate', handlePopStateEvent);\n    });\n\n    return () => {\n      return h(RouterViewComponent);\n    };\n  },\n});\n","import { renderToString } from '@vue/server-renderer';\nimport { type InitialState } from '../Types/State';\nimport { type ViewResolver } from '../Types/ViewResolver';\nimport { RouterComponent } from '../Components/Routing/RouterComponent';\n\nexport type AppFactory = (options: AppFactoryOptions) => any;\n\nexport type AppFactoryOptions = {\n  router: typeof RouterComponent,\n  props: { resolver: ViewResolver, state: InitialState },\n}\n\ntype Options = {\n  initial?: InitialState | undefined,\n  resolver: ViewResolver,\n  setup: AppFactory,\n}\n\nexport async function createFoundationController({ initial, resolver, setup }: Options) {\n  const isServer = typeof window === 'undefined';\n  const state = initial || readInitialState();\n\n  const app = setup({ router: RouterComponent, props: { resolver, state } });\n\n  if (isServer) {\n    return await renderToString(app);\n  }\n\n  return '';\n}\n\n\nfunction readInitialState(): InitialState {\n  let element = document.getElementById('fdn-init');\n\n  if (!element || !element.textContent) {\n    throw new Error('Cannot find initial script element with MVC state.');\n  }\n\n  return JSON.parse(element.textContent);\n}\n","import { ref, type Ref, nextTick } from 'vue';\n\ninterface Config {\n  title?: string;\n  description?: string;\n  yes?: string;\n  no?: string;\n}\n\ninterface ConfigWithCallback<T> extends Config {\n  callback: Callback<T>;\n}\n\nexport interface Confirmation extends Config {\n  processing: boolean,\n  confirm: () => void;\n  cancel: () => void;\n}\n\ntype Callback<T> = () => Promise<T> | T;\n\nconst confirmation = ref() as Ref<Confirmation | undefined>;\n\nasync function createConfirmation<T>(config: Config, callback: Callback<T>): Promise<T> {\n  return new Promise((resolve, reject) => {\n    function confirm() {\n      confirmation.value!.processing = true;\n\n      nextTick(() => {\n        Promise.resolve(callback()).then((value: T) => {\n          confirmation.value = undefined;\n          nextTick(() => resolve(value));\n        }).catch((error) => {\n          confirmation.value = undefined;\n          nextTick(() => reject(error));\n        });\n      });\n    }\n\n    function cancel() {\n      confirmation.value = undefined;\n      nextTick(() => reject());\n    }\n\n    confirmation.value = { ...config, processing: false, confirm, cancel };\n  });\n}\n\nasync function factory<T>(config: ConfigWithCallback<T>): Promise<T>;\nasync function factory<T>(callback: Callback<T>): Promise<T>;\nasync function factory<T>(config: Config, callback: Callback<T>): Promise<T>;\nasync function factory<T>(configOrCallback: any, callback?: Callback<T>): Promise<T> {\n  if (callback === undefined) {\n    if (configOrCallback instanceof Function) {\n      return createConfirmation({}, configOrCallback);\n    } else {\n      return createConfirmation(configOrCallback, configOrCallback.callback);\n    }\n  } else {\n    if (configOrCallback instanceof Function) {\n      return createConfirmation({}, configOrCallback);\n    } else {\n      return createConfirmation(configOrCallback, callback);\n    }\n  }\n}\n\nexport function useCurrentConfirmation() {\n  return confirmation;\n}\n\nexport function useConfirmation() {\n  return factory;\n}\n","import { ref, type Ref } from 'vue';\nimport type { FormContextInterface } from '../Services/FormContext.ts';\n\ntype FormApi = {\n  ctx: FormContextInterface;\n  submit: () => void;\n}\n\nexport function useFormApi() {\n  return ref() as Ref<FormApi>;\n}\n","import { inject } from 'vue';\nimport { FormContextInjectionKey, type FormContextInterface } from '../Services/FormContext';\n\nexport function useFormContext(): FormContextInterface | null {\n  return inject(FormContextInjectionKey, null);\n}\n\nexport function usePersistentFormContext(): FormContextInterface {\n  let context = inject(FormContextInjectionKey);\n\n  if (!context) {\n    throw new Error('Accessing form outside of context.');\n  }\n\n  return context;\n}\n","import { inject, type Ref } from 'vue';\nimport { StackedViewLocationInjectionKey } from '../Services/StackedView';\n\nexport function useViewLocation(): Ref<string | undefined> {\n  const view = inject(StackedViewLocationInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get stacked view parent out of Router context!');\n  }\n\n  return view;\n}\n","import { inject, type Ref, computed } from 'vue';\nimport { StackedViewParentInjectionKey } from '../Services/StackedView';\nimport type { StackedViewResolved } from '../Types/StackedView';\nimport { url } from '../Support/Url';\n\nexport function useViewParent(): Ref<StackedViewResolved | undefined> {\n  const view = inject(StackedViewParentInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get parent view out of Router context!');\n  }\n\n  return view;\n}\n\nexport function useViewParentLocation() {\n  const parent = useViewParent();\n\n  return computed(() => {\n    if (parent && parent.value && parent.value.location) {\n      return url(parent.value.location, parent.value.query);\n    }\n  });\n}\n","import { inject, type Ref } from 'vue';\nimport { StackedViewQueryInjectionKey } from '../Services/StackedView';\n\nexport function useViewQuery(): Ref<Record<string, any> | undefined> {\n  const view = inject(StackedViewQueryInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get stacked view query params out of Router context!');\n  }\n\n  return view;\n}\n","export function groupBy<T extends Record<K, PropertyKey>, K extends keyof T>(array: T[], key: K): Record<T[K], T[]> {\n  return array.reduce((result, item) => {\n    const groupKey = item[key];\n\n    if (!result[groupKey]) {\n      result[groupKey] = [];\n    }\n\n    result[groupKey].push(item);\n\n    return result;\n  }, {} as Record<T[K], T[]>);\n}\n\n\n","export function isCountryImplicit(country: string | null | undefined) {\n  if (country) {\n    return APP_COUNTRIES_IMPLICITLY_ADDRESSES.includes(country);\n  }\n\n  return false;\n}\n\nexport function isCountryExplicit(country: string | null | undefined) {\n  return !isCountryImplicit(country);\n}\n","export function blank(value: any) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n\n  if (typeof value === 'number' || typeof value === 'boolean') {\n    return false;\n  }\n\n  if (typeof value === 'string') {\n    return value.trim() === '';\n  }\n\n  if (value instanceof Array) {\n    return value.length > 0;\n  }\n\n  if (value instanceof Set || value instanceof Map) {\n    return value.size > 0;\n  }\n\n  return !value;\n}\n\nexport function filled(value: any) {\n  return !blank(value);\n}\n","export function hash(length: number = 16): string {\n  return Array.from(window.crypto.getRandomValues(new Uint8Array(Math.ceil(length / 2))), (b) => ('0' + (b & 0xFF).toString(16)).slice(-2)).join('');\n}\n","export type NestedSetItem = {\n  id: number;\n  left: number;\n  right: number;\n  parent: number | null;\n  label: string | null;\n}\n\nexport type NestedSet<T extends NestedSetItem = any> = T[];\n\nexport function nestedSetRoot<T extends NestedSetItem = any>(data: NestedSet<T>) {\n  return data.filter((node) => node.parent === null);\n}\n\nexport function nestedSetChildren<T extends NestedSetItem = any>(data: NestedSet<T>, item: T) {\n  return data.filter((node) => (node.left > item.left && node.right < item.right && node.parent === item.id));\n}\n\nexport function nestedSetAncestors<T extends NestedSetItem = any>(data: NestedSet<T>, item: T) {\n  return data.filter((node) => (node.left < item.left && node.right > item.right));\n}\n\nexport function nestedSetDescendants<T extends NestedSetItem = any>(data: NestedSet<T>, item: T) {\n  return data.filter((node) => (node.left > item.left && node.right < item.right));\n}\n","export function random(length: number, characterSet: string | undefined = undefined) {\n  let result = '';\n\n  const characters = characterSet || 'QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890';\n  const charactersLength = characters.length;\n\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n\n  return result;\n}\n","export function findScrollParent(element: HTMLElement | HTMLElement[] | undefined | null) {\n  if (!element) {\n    return undefined;\n  }\n\n  if (Array.isArray(element)) {\n    if (element.length === 0) {\n      return undefined;\n    }\n\n    element = element[0];\n  }\n\n  let parent: HTMLElement | null | undefined = element;\n\n  while (parent) {\n    const { overflow } = window.getComputedStyle(parent);\n\n    if (overflow.split(' ').some((o) => o === 'auto' || o === 'scroll')) {\n      return parent;\n    }\n\n    parent = parent.parentElement;\n  }\n\n  return document.documentElement;\n}\n","export const ToastKind = {\n  SUCCESS: 'success',\n  DANGER: 'danger',\n  INFO: 'info',\n  WARNING: 'warning',\n} as const;\n\nexport interface Toast {\n  id: string,\n  description: string,\n  duration: number,\n  kind: typeof ToastKind[keyof typeof ToastKind],\n}\n\nexport type ToastRegistry = Toast[];\n","import type { App, Plugin, ConcreteComponent } from 'vue';\nimport { FormControllerComponent } from './Components/Controllers/FormControllerComponent.ts';\nimport { RouterViewComponent } from './Components/Routing/RouterViewComponent.ts';\nimport { RouterLinkComponent } from './Components/Routing/RouterLinkComponent.ts';\nimport { RouterNestedComponent } from './Components/Routing/RouterNestedComponent.ts';\nimport { RouterFrameComponent } from './Components/Routing/RouterFrameComponent.ts';\nimport { ToastControllerComponent, ToastComponent } from './Components/Controllers/ToastControllerComponent.ts';\nimport { PasswordConfirmationControllerComponent } from './Components/Controllers/PasswordConfirmationControllerComponent.ts';\nimport { trans, transChoice } from './Support/Translator.ts';\nimport { route } from './Support/Route.ts';\nimport { StackedViewLayoutInjectionKey } from './Composables/UseStackLayout.ts';\n\nexport * from './Application/Factory.ts';\n\nexport * from './Components/Controllers/FormControllerComponent.ts';\nexport * from './Components/Controllers/ToastControllerComponent.ts';\n\nexport * from './Components/Routing/RouterComponent.ts';\nexport * from './Components/Routing/RouterLinkComponent.ts';\nexport * from './Components/Routing/RouterViewComponent.ts';\nexport * from './Components/Routing/RouterNestedComponent.ts';\nexport * from './Components/Routing/RouterFrameComponent.ts';\n\nexport * from './Composables/UseConfirmation.ts';\nexport * from './Composables/UseStackLayout.ts';\nexport * from './Composables/UseFormApi.ts';\nexport * from './Composables/UseFormContext.ts';\nexport * from './Composables/UseHttpClient.ts';\nexport * from './Composables/UseViewDepth.ts';\nexport * from './Composables/UseViewLocation.ts';\nexport * from './Composables/UseViewParent.ts';\nexport * from './Composables/UseViewQuery.ts';\nexport * from './Composables/UseViewResolver.ts';\nexport * from './Composables/UseViewStack.ts';\n\nexport * from './Events/EventBus.ts';\n\nexport * from './Http/Client/Request.ts';\nexport * from './Http/Client/Response.ts';\n\nexport * from './Services/FormContext.ts';\nexport * from './Services/StateManager.ts';\nexport * from './Services/StackedView.ts';\nexport * from './Services/ToastManager.ts';\n\nexport * from './Support/Array.ts';\nexport * from './Support/Countries.ts';\nexport * from './Support/Empty.ts';\nexport * from './Support/ErrorModal.ts';\nexport * from './Support/FormData.ts';\nexport * from './Support/Hash.ts';\nexport * from './Support/NestedSet.ts';\nexport * from './Support/Random.ts';\nexport * from './Support/Route.ts';\nexport * from './Support/Scroll.ts';\nexport * from './Support/Translator.ts';\nexport * from './Support/Url.ts';\nexport * from './Support/Wrap.ts';\n\nexport * from './Types/HeadMeta.ts';\nexport * from './Types/RouterRedirect.ts';\nexport * from './Types/StackedView.ts';\nexport * from './Types/State.ts';\nexport * from './Types/Toast.ts';\nexport * from './Types/ViewResolver.ts';\n\ninterface Configuration {\n  layout?: ConcreteComponent | string | undefined,\n}\n\nexport function createOtherSoftwareFoundation(options: Configuration = {}): Plugin {\n  return {\n    install(app: App) {\n      app.component('RouterFrame', RouterFrameComponent);\n      app.component('RouterNested', RouterNestedComponent);\n      app.component('RouterView', RouterViewComponent);\n      app.component('RouterLink', RouterLinkComponent);\n      app.component('FormController', FormControllerComponent);\n      app.component('PasswordConfirmationController', PasswordConfirmationControllerComponent);\n      app.component('ToastController', ToastControllerComponent);\n      app.component('Toast', ToastComponent);\n\n      app.provide(StackedViewLayoutInjectionKey, options.layout);\n\n      app.config.globalProperties.$t = trans;\n      app.config.globalProperties.$tc = transChoice;\n      app.config.globalProperties.$route = route;\n    },\n  };\n}\n"],"names":["inject","url","ref","toValue","computed","value","watch","hash","toRaw","defineComponent","nextTick","provide","h","mergeProps","onMounted","onBeforeUnmount","route","renderToString"],"mappings":"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AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,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"}