{"version":3,"file":"other-software-foundation.js","sources":["../src/Http/Client/Response.ts","../src/Services/StateManager.ts","../src/Http/Client/Request.ts","../src/Support/ErrorModal.ts","../src/Events/EventBus.ts","../src/Composables/UseHttpClient.ts","../src/Services/FormContext.ts","../src/Support/Url.ts","../src/Support/FormData.ts","../src/Components/Controllers/FormControllerComponent.ts","../src/Services/StackedView.ts","../src/Support/Wrap.ts","../src/Composables/UseViewResolver.ts","../src/Composables/UseViewStack.ts","../src/Composables/UseViewDepth.ts","../src/Composables/UseStackLayout.ts","../src/Components/Routing/RouterViewComponent.ts","../src/Components/Routing/RouterLinkComponent.ts","../src/Services/ToastManager.ts","../src/Components/Routing/RouterNestedViewComponent.ts","../src/Components/Routing/RouterNestedComponent.ts","../src/Components/Routing/RouterFrameComponent.ts","../src/Components/Controllers/ToastControllerComponent.ts","../src/Components/Controllers/PasswordConfirmationControllerComponent.ts","../src/Support/Translator.ts","../src/Support/Route.ts","../src/Services/MetaManager.ts","../src/Components/Routing/RouterComponent.ts","../src/Application/Factory.ts","../src/Composables/UseConfirmation.ts","../src/Composables/UseFormApi.ts","../src/Composables/UseFormContext.ts","../src/Composables/UseViewLocation.ts","../src/Composables/UseViewParent.ts","../src/Composables/UseViewQuery.ts","../src/Support/Array.ts","../src/Support/Countries.ts","../src/Support/Empty.ts","../src/Support/Hash.ts","../src/Support/NestedSet.ts","../src/Support/Random.ts","../src/Support/Scroll.ts","../src/Types/Toast.ts","../src/main.ts"],"sourcesContent":["import type { StackedView } from '../../Types/StackedView';\nimport type { RouterRedirect } from '../../Types/RouterRedirect';\nimport type { ToastRegistry } from '../../Types/Toast';\nimport type { Authenticated, Abilities, Meta, ViewErrorsBag, SharedStateResponse } from '../../Types/State';\n\nexport class Response {\n  protected readonly xhr: XMLHttpRequest;\n\n  public readonly status: number;\n  public readonly success: boolean;\n  public readonly fail: boolean;\n  public readonly partial: boolean;\n  public readonly raw: boolean;\n  public readonly message: string;\n  public readonly content: string;\n\n  constructor(xhr: XMLHttpRequest) {\n    this.xhr = xhr;\n\n    if (this.xhr.getResponseHeader('x-stack-router')) {\n      throw new Error('Invalid response for MVC HTTP client.');\n    }\n\n    this.status = this.xhr.status;\n    this.success = (this.xhr.status >= 200 && this.xhr.status < 300);\n    this.fail = !this.success;\n    this.content = this.xhr.response;\n    this.message = this.xhr.statusText;\n\n    this.partial = !!this.xhr.getResponseHeader('x-partial');\n    this.raw = !!this.xhr.getResponseHeader('x-raw');\n  }\n}\n\nexport class CompleteResponse extends Response {\n  public abilities: Abilities;\n  public meta: Meta[] | undefined;\n  public shared: SharedStateResponse | undefined;\n  public authenticated: Authenticated | null;\n  public location: string;\n  public signature: string;\n  public redirect: RouterRedirect;\n  public stack: StackedView;\n  public toasts: ToastRegistry;\n  public errors: ViewErrorsBag;\n  public data: any;\n\n  constructor(xhr: XMLHttpRequest) {\n    super(xhr);\n\n    let data = JSON.parse(this.xhr.response);\n\n    this.meta = data.meta;\n    this.abilities = data.abilities;\n    this.shared = data.shared;\n    this.authenticated = data.authenticated;\n    this.location = data.location;\n    this.signature = data.signature;\n    this.redirect = data.redirect;\n    this.stack = data.stack;\n    this.errors = data.errors;\n    this.toasts = data.toasts;\n    this.data = data.raw;\n  }\n}\n","import { type InjectionKey, inject, type Ref } from 'vue';\nimport type { StateManager, Authenticated, Abilities, StateHistory, ViewErrorsBag, Shared } from '../Types/State';\nimport type { StackedView, StackedViewResolved } from '../Types/StackedView';\n\nexport const StateLocationInjectionKey = Symbol('StateLocation') as InjectionKey<Ref<string>>;\nexport const StateStackSignatureInjectionKey = Symbol('StateStackSignature') as InjectionKey<Ref<string>>;\nexport const StateShared = Symbol('StateShared') as InjectionKey<Ref<Shared>>;\nexport const StateAuthenticated = Symbol('StateAuthenticated') as InjectionKey<Ref<Authenticated | null>>;\nexport const StateAbilities = Symbol('StateAbilities') as InjectionKey<Ref<Abilities>>;\nexport const StateManagerInjectionKey = Symbol('StateManager') as InjectionKey<StateManager>;\nexport const StateHistoryInjectionKey = Symbol('StateHistory') as InjectionKey<StateHistory>;\nexport const StateErrorsInjectionKey = Symbol('StateErrors') as InjectionKey<Ref<ViewErrorsBag>>;\n\nexport function useAbilities() {\n  let abilities = inject(StateAbilities);\n\n  if (!abilities) {\n    throw new Error('Abilities are used out of router context!');\n  }\n\n  return abilities;\n}\n\nexport function useAuthenticated() {\n  let authenticated = inject(StateAuthenticated);\n\n  if (!authenticated) {\n    throw new Error('Authenticated is used out of router context!');\n  }\n\n  return authenticated;\n}\n\nexport function useShared() {\n  let shared = inject(StateShared);\n\n  if (!shared) {\n    throw new Error('Shared state is used out of router context!');\n  }\n\n  return shared;\n}\n\nexport function useLocation() {\n  let location = inject(StateLocationInjectionKey);\n\n  if (!location) {\n    throw new Error('Location is used out of router context!');\n  }\n\n  return location;\n}\n\nexport function useStackSignature() {\n  let signature = inject(StateStackSignatureInjectionKey);\n\n  if (!signature) {\n    throw new Error('Stack signature is used out of router context!');\n  }\n\n  return signature;\n}\n\nexport function useStateManager() {\n  let manager = inject(StateManagerInjectionKey);\n\n  if (!manager) {\n    throw new Error('State manager is used out of router context!');\n  }\n\n  return { update: manager };\n}\n\nexport function useStateHistory() {\n  let history = inject(StateHistoryInjectionKey);\n\n  if (!history) {\n    throw new Error('State history is used out of router context!');\n  }\n\n  return history;\n}\n\nexport function useErrors() {\n  let errors = inject(StateErrorsInjectionKey);\n\n  if (!errors) {\n    throw new Error('State errors is used out of router context!');\n  }\n\n  return errors;\n}\n\nexport function updateStack(current: StackedViewResolved, fresh: StackedView): StackedViewResolved {\n  if ('keep' in fresh) {\n    if (fresh.child) {\n      if (current.child) {\n        current.child = updateStack(current.child, fresh.child);\n      } else {\n        current.child = fresh.child as StackedViewResolved;\n      }\n\n      return { ...current };\n    }\n\n    return { ...current };\n  }\n\n  return { ...fresh };\n}\n","import { Response, CompleteResponse } from './Response';\n\nexport type Method = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' | string;\nexport type Body = XMLHttpRequestBodyInit | Object | null | undefined;\nexport type Signature = string | undefined;\n\nexport interface RequestOptions {\n  method: Method,\n  url: string,\n  body?: Body | undefined,\n  signature?: Signature | undefined,\n  refreshStack?: boolean | undefined,\n  referer?: string | null | undefined,\n  nested?: boolean | undefined,\n}\n\nexport class Request {\n  protected method: Method;\n  protected url: string;\n  protected xhr: XMLHttpRequest;\n  protected body: Body;\n  protected signature: Signature;\n  protected refreshStack: boolean;\n  protected referer: string | null | undefined;\n  protected nested: boolean;\n\n  static send(options: RequestOptions) {\n    return new Request(options).send();\n  }\n\n  constructor({\n    method,\n    url,\n    body = undefined,\n    signature = undefined,\n    refreshStack = false,\n    referer = undefined,\n    nested = false,\n  }: RequestOptions) {\n    this.xhr = new XMLHttpRequest();\n    this.method = method;\n    this.url = url;\n    this.body = body;\n    this.signature = signature;\n    this.refreshStack = refreshStack;\n    this.referer = referer;\n    this.nested = nested;\n  }\n\n  public send(): Promise<CompleteResponse> {\n    return new Promise((resolve, reject) => {\n      this.xhr.open(this.method, this.url, true);\n\n      this.xhr.setRequestHeader('Language', APP_LOCALE);\n      this.xhr.setRequestHeader('X-Stack-Router', 'true');\n      this.xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      this.xhr.setRequestHeader('X-XSRF-TOKEN', this.readCookie('XSRF-TOKEN'));\n\n      if (this.referer) {\n        this.xhr.setRequestHeader('X-Stack-Referer', this.referer);\n      }\n\n      if (this.refreshStack) {\n        this.xhr.setRequestHeader('X-Stack-Refresh', 'true');\n      }\n\n      if (this.nested) {\n        this.xhr.setRequestHeader('X-Stack-Nested', 'true');\n      }\n\n      if (this.signature) {\n        this.xhr.setRequestHeader('X-Stack-Signature', this.signature);\n      }\n\n      this.xhr.onload = () => {\n        if (this.xhr.readyState === XMLHttpRequest.DONE && this.xhr.status) {\n          if (this.xhr.status < 200 || this.xhr.status >= 300) {\n            if (this.xhr.status === 422) {\n              reject(new CompleteResponse(this.xhr));\n            } else {\n              reject(new Response(this.xhr));\n            }\n          } else {\n            resolve(new CompleteResponse(this.xhr));\n          }\n        }\n      };\n\n      this.xhr.onerror = () => {\n        reject(new Response(this.xhr));\n      };\n\n      this.xhr.send(this.transform(this.body));\n    });\n  }\n\n  protected transform(body: any) {\n    if (body instanceof Blob || body instanceof ArrayBuffer || body instanceof FormData || body instanceof URLSearchParams) {\n      return body;\n    }\n\n    if (typeof body === 'string') {\n      return body;\n    }\n\n    if (body === null) {\n      return null;\n    }\n\n    this.xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n\n    return JSON.stringify(body);\n  }\n\n  protected readCookie(name: string): string {\n    const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n\n    if (match) {\n      return (match ? decodeURIComponent(match[3]!) : '');\n    }\n\n    return '';\n  }\n}\n","export const ErrorModal = {\n  modal: undefined as HTMLDialogElement | undefined,\n  listener: undefined as any,\n\n  show(html: Record<string, unknown> | string): void {\n    if (typeof html === 'object') {\n      html = `All requests must receive a valid MVC response, however a plain JSON response was received.<hr>${JSON.stringify(html)}`;\n    }\n\n    const page = document.createElement('html');\n    page.innerHTML = html;\n    page.querySelectorAll('a').forEach((a) => a.setAttribute('target', '_top'));\n\n    this.modal = document.createElement('dialog') as HTMLDialogElement;\n    this.modal.style.display = 'flex';\n    this.modal.style.width = '100%';\n    this.modal.style.height = '100dvh';\n    this.modal.style.maxWidth = '100%';\n    this.modal.style.maxHeight = '100dvh';\n    this.modal.style.padding = '2rem';\n    this.modal.style.boxSizing = 'border-box';\n    this.modal.style.border = 'none';\n    this.modal.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';\n    this.modal.style.backdropFilter = 'blur(0.125rem)';\n    this.modal.addEventListener('click', () => this.hide());\n\n    const iframe = document.createElement('iframe');\n    iframe.style.backgroundColor = 'white';\n    iframe.style.borderRadius = '0.5rem';\n    iframe.style.border = 'none';\n    iframe.style.width = '100%';\n    iframe.style.height = '100%';\n    this.modal.appendChild(iframe);\n\n    document.body.prepend(this.modal);\n    document.body.style.overflow = 'hidden';\n\n    if (!iframe.contentWindow) {\n      throw new Error('iframe not yet ready.');\n    }\n\n    iframe.contentWindow.document.open();\n    iframe.contentWindow.document.write(page.outerHTML);\n    iframe.contentWindow.document.close();\n\n    this.listener = this.hideOnEscape.bind(this);\n\n    this.modal.showModal();\n\n    document.addEventListener('keydown', this.listener);\n  },\n\n  hide(): void {\n    this.modal!.outerHTML = '';\n    this.modal = undefined;\n    document.body.style.overflow = 'visible';\n    document.removeEventListener('keydown', this.listener!);\n  },\n\n  hideOnEscape(event: KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      this.hide();\n    }\n  },\n};\n","type EventName = string;\ntype EventHandler = (event?: any) => boolean | undefined | void;\ntype EventHandlerRegistry = EventHandler[];\ntype EventSubscriptions = Record<EventName, EventHandlerRegistry>;\n\nconst subscriptions: EventSubscriptions = {};\n\nexport const EventBus = {\n\n  addEventListener(name: EventName, callback: EventHandler) {\n    if (subscriptions[name]) {\n      subscriptions[name].push(callback);\n    } else {\n      subscriptions[name] = [callback];\n    }\n  },\n\n  removeEventListener(name: EventName, callback: EventHandler) {\n    if (!subscriptions[name]) {\n      return;\n    }\n\n    subscriptions[name] = subscriptions[name].filter((handler) => {\n      return handler !== callback;\n    });\n\n    if (subscriptions[name].length === 0) {\n      delete subscriptions[name];\n    }\n  },\n\n  dispatch<T>(name: EventName, event?: T): T | undefined {\n    if (subscriptions[name]) {\n      subscriptions[name].forEach((handler) => handler(event));\n    }\n\n    return event;\n  },\n\n};\n","import { useStateManager, useStackSignature, useStateHistory, useLocation } from '../Services/StateManager';\nimport { Request, type Method, type Body, type RequestOptions } from '../Http/Client/Request';\nimport { ErrorModal } from '../Support/ErrorModal';\nimport type { Response } from '../Http/Client/Response';\nimport { CompleteResponse } from '../Http/Client/Response';\nimport { EventBus } from '../Events/EventBus';\nimport { inject, type InjectionKey } from 'vue';\nimport lodashMerge from 'lodash.merge';\n\ninterface HttpOptions extends Omit<RequestOptions, 'method' | 'url' | 'body' | 'signature' | 'referer'> {\n  data?: Body | undefined;\n  preserveScroll?: boolean | undefined;\n  replace?: boolean | undefined;\n}\n\nexport const HttpClientScrollHandler = Symbol('HttpClientScrollHandler') as InjectionKey<undefined | (() => void)>;\nexport const HttpClientForceScrollPreservation = Symbol('HttpClientForceScrollPreservation') as InjectionKey<boolean>;\nexport const HttpClientForceNested = Symbol('HttpClientForceNested') as InjectionKey<boolean>;\n\nexport function useHttpClient() {\n  const state = useStateManager();\n  const signature = useStackSignature();\n  const history = useStateHistory();\n  const location = useLocation();\n\n  const scrollHandler = inject(HttpClientScrollHandler, () => document.body.scroll({ behavior: 'instant', left: 0, top: 0 }));\n  const forceScrollPreserve = inject(HttpClientForceScrollPreservation, false);\n  const forceNested = inject(HttpClientForceNested, false);\n\n  async function dispatch(method: Method, url: string, { data = undefined, preserveScroll = false, replace = false, nested = false, ...options }: HttpOptions = {}, previous: CompleteResponse | undefined = undefined) {\n    document.body.classList.add('osf-loading');\n    document.dispatchEvent(new Event('visit:start'));\n\n    return await Request.send({\n      ...options,\n      method,\n      url,\n      body: data,\n      signature: signature.value,\n      referer: location.value,\n      nested: nested || forceNested,\n    }).then(async (response: CompleteResponse) => {\n      if (previous) {\n        response.abilities = { ...previous.abilities, ...response.abilities };\n        response.shared = { ...previous.shared, ...response.shared };\n        response.toasts = lodashMerge(previous.toasts, response.toasts);\n        response.errors = lodashMerge(previous.errors, response.errors);\n      }\n\n      if (response.redirect) {\n        return await handleRedirectResponse(response);\n      }\n\n      return await state.update(response).then(async (fresh): Promise<any> => {\n        if (response.raw) {\n          return Promise.resolve(response.data);\n        }\n\n        if (!forceScrollPreserve && !preserveScroll) {\n          resetScrollPosition();\n        }\n\n        if (replace) {\n          history.historyReplaceState(fresh);\n        } else {\n          history.historyPushState(fresh);\n        }\n\n        return Promise.resolve(response);\n      });\n    }).catch(async (error: Response | CompleteResponse) => {\n      if (error instanceof CompleteResponse) {\n        return await state.update(error).then(() => Promise.reject(error));\n      }\n\n      if (error.status === 423) {\n        EventBus.dispatch('password.confirm', { method, url, options: { data, preserveScroll, replace } });\n\n        return Promise.reject(error);\n      }\n\n      console.error(error);\n\n      if (APP_DEBUG && error.content) {\n        ErrorModal.show(error.content);\n      }\n\n      return Promise.reject(error);\n    }).finally(() => {\n      document.body.classList.remove('osf-loading');\n      document.dispatchEvent(new Event('visit:done'));\n    });\n  }\n\n  function resetScrollPosition() {\n    if (scrollHandler) {\n      scrollHandler();\n    }\n  }\n\n  async function handleRedirectResponse(response: CompleteResponse): Promise<any> {\n    if (response.redirect.reload) {\n      return await new Promise(() => {\n        window.location.href = response.redirect.target;\n      });\n    }\n\n    return await dispatch('GET', response.redirect.target, {\n      preserveScroll: true,\n      replace: false,\n      refreshStack: true,\n    }, response);\n  }\n\n  return {\n    dispatch,\n\n    get: async function (url: string) {\n      return await dispatch('GET', url);\n    },\n\n    post: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('POST', url, { data, preserveScroll: true });\n    },\n\n    patch: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('PATCH', url, { data, preserveScroll: true });\n    },\n\n    put: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('PUT', url, { data, preserveScroll: true });\n    },\n\n    delete: async function (url: string, data: Body | undefined = undefined) {\n      return await dispatch('DELETE', url, { data, preserveScroll: true });\n    },\n  };\n}\n","import { ref, type Ref, type InjectionKey, computed, type MaybeRefOrGetter, toValue, watch } from 'vue';\nimport lodashCloneDeep from 'lodash.clonedeep';\nimport lodashSet from 'lodash.set';\nimport lodashGet from 'lodash.get';\nimport { useErrors } from './StateManager.ts';\n\nexport const FormContextInjectionKey = Symbol('FormContext') as InjectionKey<FormContextInterface>;\nexport type InputFilesReader = () => File | File[] | null | undefined;\n\nexport function createFormContext(\n  initialData: MaybeRefOrGetter<Record<string, any>>,\n  initialBag: MaybeRefOrGetter<string>,\n  initialReadonly: MaybeRefOrGetter<boolean>,\n) {\n  const bags = useErrors();\n\n  const data = ref(lodashCloneDeep(toValue(initialData)));\n  const files = ref({});\n  const readonly = ref(toValue(initialReadonly));\n  const bag = ref(toValue(initialBag));\n\n  const touched = ref({}) as Ref<Record<string, boolean>>;\n  const processing = ref(false);\n\n  const errors = computed(() => bags.value[bag.value] || {});\n\n  function touch(name: string) {\n    lodashSet(touched.value, name, true);\n  }\n\n  function value(name: string, value: any) {\n    return lodashGet(data.value, name, value);\n  }\n\n  function fill(name: string, value: any, filesReader: InputFilesReader | undefined = undefined) {\n    if (filesReader) {\n      lodashSet(files.value, name, filesReader());\n    }\n\n    lodashSet(data.value, name, value);\n  }\n\n  watch(() => toValue(initialData), (value) => data.value = lodashCloneDeep(value));\n  watch(() => toValue(initialBag), (value) => bag.value = value);\n  watch(() => toValue(initialReadonly), (value) => readonly.value = value);\n\n  return {\n    data,\n    files,\n    errors,\n    touched,\n    processing,\n    readonly,\n    touch,\n    value,\n    fill,\n  };\n}\n\nexport type FormContextInterface = ReturnType<typeof createFormContext>;\n\nexport function setModelWithContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any): any;\nexport function setModelWithContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any, input: HTMLInputElement | null | undefined): any;\nexport function setModelWithContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any, input: HTMLInputElement | null | undefined = undefined) {\n  if (name && ctx) {\n    ctx.touch(name);\n    ctx.fill(name, value, () => {\n      if (input) {\n        if (input.files instanceof FileList) {\n          if (input.multiple) {\n            return Array.from(input.files);\n          } else {\n            return input.files.item(0);\n          }\n        }\n      }\n    });\n  }\n\n  return value;\n}\n\nexport function getModelFromContext(name: Nullable<string>, ctx: Nullable<FormContextInterface>, value: any) {\n  if (name && ctx) {\n    return ctx.value(name, value);\n  }\n\n  return value;\n}\n","import { toRaw } from 'vue';\n\nexport function url(uri: string, params?: Record<string, any>, hash?: string, base?: string | null) {\n  const url = new URL(uri, base || APP_URL);\n\n  if (params) {\n    attachSearchParameters(url.searchParams, params);\n  }\n\n  if (hash) {\n    url.hash = hash;\n  }\n\n  return url.toString();\n}\n\n\nfunction attachSearchParameters(search: URLSearchParams, params: Record<string, any>) {\n  Object.keys(params).forEach((key) => {\n    appendSearchParameter(search, key, toRaw(params[key]));\n  });\n}\n\n\nfunction appendSearchParameter(search: URLSearchParams, name: string, value: any, prev?: string) {\n  if (prev) {\n    name = prev + '[' + name + ']';\n  }\n\n  if (value == null) {\n    search.set(name, '');\n    return search;\n  }\n\n  if (Array.isArray(value)) {\n    value.forEach((arrValue, arrIndex) => {\n      appendSearchParameter(search, arrIndex.toString(), arrValue, name);\n    });\n\n    return search;\n  }\n\n  if (typeof value === 'object') {\n    Object.keys(value).forEach((key) => {\n      appendSearchParameter(search, key, value[key], name);\n    });\n\n    return search;\n  }\n\n  if (typeof value === 'boolean') {\n    value = Number(value);\n  }\n\n  if (value == null) {\n    value = '';\n  }\n\n  search.set(name, value);\n\n  return search;\n}\n","import { toRaw } from 'vue';\n\nexport function buildFormData(data: Record<string, any> | null | undefined) {\n  let result = new FormData();\n\n  if (data) {\n    attachFields(result, data);\n  }\n\n  return result;\n}\n\nfunction attachFields(data: FormData, fields: Record<string, any>) {\n  Object.keys(fields).forEach((key) => appendField(data, key, toRaw(fields[key])));\n}\n\n\nfunction appendField(data: FormData, name: string, value: any, prev?: string) {\n  if (prev) {\n    name = prev + '[' + name + ']';\n  }\n\n  if (value == null) {\n    data.set(name, '');\n    return data;\n  }\n\n  if (value instanceof File) {\n    data.set(name, value);\n    return data;\n  }\n\n  if (Array.isArray(value)) {\n    value.forEach((arrValue, arrIndex) => appendField(data, arrIndex.toString(), arrValue, name));\n    return data;\n  }\n\n  if (typeof value === 'object') {\n    Object.keys(value).forEach((key) => appendField(data, key, value[key], name));\n    return data;\n  }\n\n  if (typeof value === 'boolean') {\n    value = Number(value);\n  }\n\n  if (value == null) {\n    value = '';\n  }\n\n  data.set(name, value);\n\n  return data;\n}\n","import { type PropType, nextTick, provide, defineComponent, h, type SlotsType, inject, computed, mergeProps } from 'vue';\nimport type { Method } from '../../Http/Client/Request';\nimport type { Response } from '../../Http/Client/Response';\nimport { CompleteResponse } from '../../Http/Client/Response';\nimport { useHttpClient } from '../../Composables/UseHttpClient';\nimport { createFormContext, FormContextInjectionKey, type FormContextInterface } from '../../Services/FormContext';\nimport { useErrors } from '../../Services/StateManager.ts';\nimport { url } from '../../Support/Url.ts';\nimport lodashMerge from 'lodash.merge';\nimport { buildFormData } from '../../Support/FormData.ts';\n\ntype FormHandler = (data: any, ctx: FormContextInterface) => Promise<any>;\n\nexport const FormControllerComponent = defineComponent({\n  name: 'FormController',\n  props: {\n    action: {\n      type: String,\n      required: false,\n    },\n    method: {\n      type: String as PropType<Method>,\n      required: false,\n      default: 'POST',\n    },\n    data: {\n      type: Object,\n      required: false,\n      default: {},\n    },\n    readonly: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    continuous: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    bag: {\n      type: String,\n      required: false,\n      default: 'default',\n    },\n    onSubmit: {\n      type: Function as PropType<FormHandler>,\n      required: false,\n    },\n  },\n  slots: Object as SlotsType<{\n    default: {\n      data: any\n      processing: boolean,\n      errors: Record<string, string[]>,\n      touched: Record<string, boolean>,\n      ctx: FormContextInterface,\n      submit: () => void,\n    },\n  }>,\n  setup(props, { attrs, slots, expose }) {\n    const parent = inject(FormContextInjectionKey, null);\n\n    const ctx = createFormContext(() => props.data, () => props.bag, () => props.readonly);\n    const http = useHttpClient();\n    const bags = useErrors();\n\n    const { data, files, processing, readonly, errors, touched } = ctx;\n\n    const element = computed(() => {\n      return parent ? 'div' : 'form';\n    });\n\n    const specific = computed(() => {\n      return parent ? {\n        ['data-action']: props.action,\n        ['data-method']: props.method,\n      } : {\n        ['action']: props.action,\n        ['method']: props.method,\n      };\n    });\n\n    function dispatch() {\n      if (props.onSubmit) {\n        return props.onSubmit(data.value, ctx);\n      }\n\n      if (!props.action) {\n        throw new Error('You must either provide action or your custom form handler!');\n      }\n\n      if (props.method === 'GET') {\n        return http.dispatch(props.method, url(props.action, data.value));\n      }\n\n      let method = props.method;\n      let fields = lodashMerge(data.value, files.value);\n\n      // When files are defined in the form, convert form data from JSON into\n      // FormData. This allows the form to be sent as \"multipart/form-data\",\n      // which supports files upload.\n      if (Object.keys(files.value).length > 0) {\n        // When form method isn't POST implement a method spoofing mechanism\n        // supported by Laravel. This allows the framework to treat, for example,\n        // a POST request as PATCH. It's due to the specific of PHP as it only\n        // allows file uploads within the POST method.\n        if (method !== 'POST') {\n          fields._method = props.method;\n          method = 'POST';\n        }\n\n        fields = buildFormData(fields);\n      }\n\n      return http.dispatch(method, props.action, { data: fields });\n    }\n\n    function submit(event?: Event) {\n      let beforeReadonly = readonly.value;\n\n      if (event) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n\n      processing.value = true;\n\n      if (!props.continuous) {\n        readonly.value = true;\n      }\n\n      bags.value = {};\n      touched.value = {};\n\n      // noinspection JSIgnoredPromiseFromCall\n      nextTick(() => {\n        dispatch().catch((error: Response | CompleteResponse) => {\n          if (error instanceof CompleteResponse) {\n            bags.value = error.errors;\n\n            if (!props.continuous) {\n              nextTick(() => {\n                document.querySelector('.control--error')?.scrollIntoView();\n              });\n            }\n          }\n        }).finally(() => {\n          processing.value = false;\n          readonly.value = beforeReadonly;\n        });\n      });\n    }\n\n    function handleSubmit(event: Event) {\n      event.stopPropagation();\n      event.preventDefault();\n\n      submit();\n    }\n\n    function onKeydown(event: KeyboardEvent) {\n      if (event.key === 'Enter') {\n        const target = event.target as HTMLElement;\n\n        if (target.tagName !== 'TEXTAREA' && !(target as HTMLInputElement).form && element.value === 'div') {\n          handleSubmit(event);\n        }\n      }\n    }\n\n    const eventHandlers = computed(() => {\n      let handlers = {} as any;\n\n      if (element.value === 'form') {\n        handlers = { onSubmit: handleSubmit };\n      } else if (element.value === 'div') {\n        handlers = { onKeydown };\n      }\n\n      if (props.continuous) {\n        handlers.onChange = handleSubmit;\n      }\n\n      return handlers;\n    });\n\n    expose({\n      ctx,\n      submit,\n    });\n\n    provide(FormContextInjectionKey, ctx);\n\n    return () => h(element.value, mergeProps(attrs, specific.value, eventHandlers.value, { class: 'form' }), slots.default({\n      data: data.value,\n      processing: processing.value,\n      errors: errors.value,\n      touched: touched.value,\n      ctx,\n      submit,\n    }));\n  },\n});\n","import { type InjectionKey, type Ref } from 'vue';\nimport { type ViewResolver } from '../Types/ViewResolver';\nimport { type StackedViewResolved } from '../Types/StackedView';\n\nexport const StackedViewResolverInjectionKey = Symbol('ViewResolver') as InjectionKey<ViewResolver>;\nexport const StackedViewInjectionKey = Symbol('StackedView') as InjectionKey<Ref<StackedViewResolved | undefined>>;\nexport const StackedViewDepthInjectionKey = Symbol('StackedViewDepth') as InjectionKey<Ref<number>>;\nexport const StackedViewParentInjectionKey = Symbol('StackedViewParent') as InjectionKey<Ref<StackedViewResolved | undefined>>;\nexport const StackedViewLocationInjectionKey = Symbol('StackedViewLocation') as InjectionKey<Ref<string | undefined>>;\nexport const StackedViewQueryInjectionKey = Symbol('StackedViewQuery') as InjectionKey<Ref<Record<string, any> | undefined>>;\n","export function wrap<T>(item: T): T[] & any[] {\n  return Array.isArray(item) ? item : [item];\n}\n","import { inject } from 'vue';\nimport { StackedViewResolverInjectionKey } from '../Services/StackedView';\nimport type { ViewResolver } from '../Types/ViewResolver';\n\nexport function useViewResolver(): ViewResolver {\n  const resolver = inject(StackedViewResolverInjectionKey);\n\n  if (!resolver) {\n    throw new Error('You\\'re trying to get ViewResolver ouf of Router context!');\n  }\n\n  return resolver;\n}\n","import { inject, type Ref, type InjectionKey } from 'vue';\nimport { StackedViewInjectionKey } from '../Services/StackedView';\nimport { type StackedViewResolved } from '../Types/StackedView';\n\nexport const PreventNestedRouterViewRenderInjectionKey = Symbol('PreventNestedRouterViewRenderInjectionKey') as InjectionKey<boolean>;\n\nexport function isNestedRouterViewPrevented(): boolean {\n  return inject(PreventNestedRouterViewRenderInjectionKey, false);\n}\n\nexport function useViewStack(): Ref<StackedViewResolved | undefined> {\n  const view = inject(StackedViewInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get stacked view out of Router context!');\n  }\n\n  return view;\n}\n","import { inject, type Ref } from 'vue';\nimport { StackedViewDepthInjectionKey } from '../Services/StackedView';\n\nexport function useViewDepth(): Ref<number> {\n  const view = inject(StackedViewDepthInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get view depth out of Router context!');\n  }\n\n  return view;\n}\n","import { inject, type InjectionKey, type ConcreteComponent } from 'vue';\n\nexport const StackedViewLayoutInjectionKey = Symbol('StackedViewLayoutInjectionKey') as InjectionKey<ConcreteComponent | string | undefined>;\n\nexport function useStackLayout(): ConcreteComponent | string | undefined {\n  return inject(StackedViewLayoutInjectionKey, () => undefined);\n}\n","import { defineComponent, provide, h, type PropType, computed, type SlotsType } from 'vue';\nimport { StackedViewInjectionKey, StackedViewQueryInjectionKey, StackedViewLocationInjectionKey, StackedViewDepthInjectionKey, StackedViewParentInjectionKey } from '../../Services/StackedView';\nimport { wrap } from '../../Support/Wrap';\nimport { useViewResolver } from '../../Composables/UseViewResolver';\nimport { useViewStack, isNestedRouterViewPrevented } from '../../Composables/UseViewStack';\nimport { useViewDepth } from '../../Composables/UseViewDepth';\nimport type { StackedViewResolved } from '../../Types/StackedView';\nimport { useStackLayout } from '../../Composables/UseStackLayout.ts';\nimport { HttpClientScrollHandler } from '../../Composables/UseHttpClient.ts';\n\nexport const RouterViewComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'RouterView',\n  props: {\n    allowLayouts: {\n      type: Boolean as PropType<boolean>,\n      required: false,\n      default: true,\n    },\n  },\n  slots: Object as SlotsType<{\n    default?: () => any,\n  }>,\n  setup(props, { slots }) {\n    const resolver = useViewResolver();\n    const defaultLayout = useStackLayout();\n    const depth = useViewDepth();\n    const view = useViewStack();\n    const prevented = isNestedRouterViewPrevented();\n\n    const location = computed(() => view.value?.location);\n    const query = computed(() => view.value?.query);\n\n    const stack = computed(() => {\n      if (view.value && view.value.child) {\n        return { ...view.value.child, parent: view.value } satisfies StackedViewResolved;\n      } else {\n        return undefined;\n      }\n    });\n\n    provide(StackedViewInjectionKey, stack);\n    provide(StackedViewDepthInjectionKey, computed(() => depth.value + 1));\n    provide(StackedViewParentInjectionKey, computed(() => view.value?.parent));\n    provide(StackedViewLocationInjectionKey, location);\n    provide(StackedViewQueryInjectionKey, query);\n\n    provide(HttpClientScrollHandler, () => {\n      document.body.scroll({ behavior: 'instant', left: 0, top: 0 });\n    });\n\n    if (prevented) {\n      return () => null;\n    }\n\n    return () => {\n      if (view.value && 'component' in view.value) {\n        let component = resolver(view.value.component);\n        let viewProps = view.value.props;\n\n        component.inheritAttrs = !!component.inheritAttrs;\n\n        let children = h(component, viewProps);\n\n        if (depth.value === 0 && component.layout === undefined) {\n          component.layout = defaultLayout;\n        }\n\n        if (props.allowLayouts && component.layout) {\n          children = wrap(component.layout).concat(children).reverse().reduce((child, layout) => {\n            layout = typeof layout === 'string' ? resolver(layout) : layout;\n\n            layout.inheritAttrs = !!layout.inheritAttrs;\n\n            return h(layout, viewProps, () => child);\n          });\n        }\n\n        return children;\n      }\n\n      if (slots.default) {\n        return slots.default();\n      }\n    };\n  },\n});\n","import { defineComponent, ref, computed, h, type PropType, nextTick, mergeProps } from 'vue';\nimport { type Body, type Method } from '../../Http/Client/Request';\nimport { useLocation } from '../../Services/StateManager';\nimport { useHttpClient } from '../../Composables/UseHttpClient';\n\nexport const RouterLinkComponent = defineComponent({\n  name: 'RouterLink',\n  props: {\n    method: { type: String as PropType<Method>, required: false, default: 'GET' },\n    href: { type: String as PropType<string | null | undefined>, required: false },\n    data: { type: [Object, Array, String, null] as PropType<Body>, required: false },\n    preserveScroll: { type: Boolean, required: false },\n    replace: { type: Boolean, required: false },\n    target: { type: String as PropType<string>, required: false },\n    disabled: { type: Boolean, required: false },\n    explicit: { type: Boolean, required: false },\n  },\n  setup(props, { attrs, slots }) {\n    const location = useLocation();\n    const http = useHttpClient();\n    const pending = ref(false);\n\n    const active = computed(() => {\n      let current = location.value.replace(/\\/$/, '');\n      let target = props.href?.replace(/\\/$/, '');\n      let explicit = current === target;\n      let implicit = (!props.explicit && target && location.value.startsWith(target));\n\n      return explicit || implicit;\n    });\n\n    const as = computed(() => props.href ? 'a' : 'button');\n    const specific = computed(() => props.href ? { target: props.target } : { disabled: props.disabled });\n\n    function onClick(event: MouseEvent) {\n      if (!props.href || !shouldInterceptEvent(event, props.href, props.target)) {\n        return;\n      }\n\n      if (event.defaultPrevented) {\n        event.preventDefault();\n        return;\n      }\n\n      event.preventDefault();\n\n      if (props.disabled) {\n        return;\n      }\n\n      let { method, href, data, preserveScroll, replace } = props;\n\n      pending.value = true;\n\n      // noinspection JSIgnoredPromiseFromCall\n      nextTick(() => {\n        http.dispatch(method, href, { data, preserveScroll, replace }).then(() => {\n          pending.value = false;\n        }).catch(() => {\n          pending.value = false;\n        });\n      });\n    }\n\n    return () => h(\n      as.value,\n      mergeProps(attrs, specific.value, {\n        href: props.href,\n        class: [{ active: active.value, pending: pending.value, disabled: props.disabled }],\n        onClick,\n      }),\n      // @ts-ignore\n      slots.default({ active, pending }),\n    );\n  },\n});\n\nfunction shouldInterceptEvent(event: MouseEvent, href: string, target?: string) {\n  if (target === '_blank' || isCrossOriginHref(href)) {\n    return false;\n  }\n\n  return !(\n    event.button > 1 ||\n    event.altKey ||\n    event.ctrlKey ||\n    event.metaKey ||\n    event.shiftKey\n  );\n}\n\nfunction isCrossOriginHref(href: string) {\n  try {\n    let currentOrigin = window.location.host;\n    let targetOrigin = new URL(href).host;\n\n    return currentOrigin !== targetOrigin;\n  } catch (e) {\n    return false;\n  }\n}\n","import { type InjectionKey, inject, type Ref } from 'vue';\nimport type { ToastRegistry } from '../Types/Toast';\n\nexport const ToastRegistryInjectionKey = Symbol('ToastRegistry') as InjectionKey<Ref<ToastRegistry>>;\n\nexport function useToasts() {\n  let toasts = inject(ToastRegistryInjectionKey);\n\n  if (!toasts) {\n    throw new Error('Toasts are used out of router context!');\n  }\n\n  return toasts;\n}\n","import { defineComponent, type SlotsType, onMounted, ref, nextTick, h } from 'vue';\nimport { useHttpClient } from '../../Composables/UseHttpClient.ts';\nimport { RouterViewComponent } from './RouterViewComponent.ts';\n\nexport const RouterNestedViewComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'RouterNestedView',\n  props: {\n    action: { type: String, required: true },\n  },\n  slots: Object as SlotsType<{\n    default?: () => any,\n  }>,\n  setup(props, { slots }) {\n    const http = useHttpClient();\n    const loading = ref(true);\n\n    onMounted(() => {\n      http.dispatch('GET', props.action).then(() => nextTick(() => {\n        loading.value = false;\n      }));\n    });\n\n    return () => {\n      if (loading.value) {\n        if (slots.default) {\n          return slots.default();\n        }\n      } else {\n        return h(RouterViewComponent);\n      }\n    };\n  },\n});\n","import { defineComponent, provide, h, ref, toValue, toRaw, computed, inject, type Ref, type SlotsType, nextTick } from 'vue';\nimport { type State, type Abilities, type ViewErrorsBag } from '../../Types/State';\nimport { type StackedViewResolved } from '../../Types/StackedView';\nimport { type CompleteResponse } from '../../Http/Client/Response';\nimport { StackedViewInjectionKey, StackedViewDepthInjectionKey } from '../../Services/StackedView';\nimport { StateLocationInjectionKey, StateManagerInjectionKey, StateStackSignatureInjectionKey, updateStack, StateAuthenticated, StateAbilities, StateHistoryInjectionKey, StateShared, StateErrorsInjectionKey } from '../../Services/StateManager';\nimport { ToastRegistryInjectionKey } from '../../Services/ToastManager';\nimport { HttpClientForceScrollPreservation, HttpClientForceNested } from '../../Composables/UseHttpClient';\nimport { RouterNestedViewComponent } from './RouterNestedViewComponent';\n\n\nexport const RouterNestedComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'RouterNested',\n  props: {\n    action: { type: String, required: true },\n  },\n  slots: Object as SlotsType<{\n    default?: () => any,\n  }>,\n  setup(props, { slots }) {\n    const location = ref(props.action);\n    const abilities = ref(undefined) as unknown as Ref<Abilities>;\n    const stack = ref(undefined) as unknown as Ref<StackedViewResolved>;\n    const signature = ref(undefined) as unknown as Ref<string>;\n    const errors = ref({}) as Ref<ViewErrorsBag>;\n\n    const shared = inject(StateShared)!;\n    const authenticated = inject(StateAuthenticated)!;\n    const toasts = inject(ToastRegistryInjectionKey)!;\n\n    function buildState() {\n      return {\n        location: toRaw(toValue(location)),\n        signature: toRaw(toValue(signature)),\n        stack: toRaw(toValue(stack)),\n      };\n    }\n\n    async function update(fresh: CompleteResponse): Promise<State> {\n      return await nextTick(async () => {\n        abilities.value = { ...abilities.value, ...fresh.abilities };\n        authenticated.value = fresh.authenticated;\n        errors.value = fresh.errors;\n\n        if (fresh.location) location.value = fresh.location;\n        if (fresh.stack) stack.value = updateStack(toRaw(toValue(stack.value)), fresh.stack);\n        if (fresh.signature) signature.value = fresh.signature;\n\n        return await nextTick(() => {\n          if (fresh.shared) shared.value = { ...shared.value, ...fresh.shared };\n          if (fresh.toasts && fresh.toasts.length > 0) toasts.value = [...toasts.value, ...fresh.toasts];\n\n          return buildState();\n        });\n      });\n    }\n\n    provide(StateAbilities, abilities);\n    provide(StateAuthenticated, authenticated);\n    provide(StateErrorsInjectionKey, errors);\n    provide(StateLocationInjectionKey, location);\n    provide(StackedViewInjectionKey, stack);\n    provide(StateStackSignatureInjectionKey, signature);\n    provide(StateShared, shared);\n    provide(ToastRegistryInjectionKey, toasts);\n    provide(StateManagerInjectionKey, update);\n    provide(StackedViewDepthInjectionKey, computed(() => 0));\n    provide(HttpClientForceScrollPreservation, true);\n    provide(HttpClientForceNested, true);\n\n    provide(StateHistoryInjectionKey, {\n      historyPushState() {\n        // Nothing to do, we don't handle history in nested routers.\n      },\n      historyReplaceState() {\n        // Nothing to do, we don't handle history in nested routers.\n      },\n    });\n\n    return () => {\n      return h(RouterNestedViewComponent, { action: props.action }, slots);\n    };\n  },\n});\n","import { defineComponent, provide, h, ref, nextTick, toValue, toRaw, inject, type Ref, type SlotsType, onMounted, watch } from 'vue';\nimport lodashMerge from 'lodash.merge';\nimport { type StackedViewResolved } from '../../Types/StackedView';\nimport { updateStack, StateAuthenticated, StateAbilities, StateShared, StateErrorsInjectionKey } from '../../Services/StateManager';\nimport { ToastRegistryInjectionKey } from '../../Services/ToastManager';\nimport { HttpClientForceScrollPreservation, HttpClientForceNested } from '../../Composables/UseHttpClient';\nimport { Request } from '../../Http/Client/Request.ts';\nimport { EventBus } from '../../Events/EventBus.ts';\nimport { ErrorModal } from '../../Support/ErrorModal.ts';\nimport { useViewResolver } from '../../Composables/UseViewResolver.ts';\nimport { StackedViewInjectionKey } from '../../Services/StackedView.ts';\nimport { PreventNestedRouterViewRenderInjectionKey } from '../../Composables/UseViewStack.ts';\n\n\nexport const RouterFrameComponent = defineComponent({\n    inheritAttrs: false,\n    name: 'RouterFrame',\n    props: {\n      src: { type: String, required: true },\n    },\n    slots: Object as SlotsType<{\n      default?: () => any,\n    }>,\n    setup(props, { slots }) {\n      const resolver = useViewResolver();\n\n      const abilities = inject(StateAbilities)!;\n      const authenticated = inject(StateAuthenticated)!;\n      const shared = inject(StateShared)!;\n      const errors = inject(StateErrorsInjectionKey)!;\n      const toasts = inject(ToastRegistryInjectionKey)!;\n      const stack = inject(StackedViewInjectionKey)!;\n\n      const loading = ref(true);\n      const view = ref(undefined) as unknown as Ref<StackedViewResolved>;\n\n      provide(HttpClientForceScrollPreservation, true);\n      provide(HttpClientForceNested, true);\n      provide(PreventNestedRouterViewRenderInjectionKey, true);\n\n      function load() {\n        Request.send({ method: 'GET', url: props.src, nested: true }).then(async (response) => {\n          if (response.redirect) {\n            return new Promise(() => {\n              window.location.href = response.redirect.target;\n            });\n          }\n\n          abilities.value = { ...abilities.value, ...response.abilities };\n          authenticated.value = response.authenticated;\n          errors.value = { ...lodashMerge(errors.value, response.errors) };\n\n          if (response.shared) {\n            shared.value = { ...shared.value, ...response.shared };\n          }\n\n          if (response.stack) {\n            view.value = updateStack(toRaw(toValue(view.value)), response.stack);\n          }\n\n          if (response.toasts && response.toasts.length > 0) {\n            toasts.value = [...toasts.value, ...response.toasts];\n          }\n\n          await nextTick();\n\n          return Promise.resolve(response);\n        }).catch(async (error) => {\n          if (error.status === 423) {\n            EventBus.dispatch('password.confirm', { method: 'GET', url: props.src, options: { data: undefined, preserveScroll: true, replace: false } });\n\n            return Promise.reject(error);\n          }\n\n          console.error(error);\n\n          if (APP_DEBUG && error.content) {\n            ErrorModal.show(error.content);\n          }\n\n          return Promise.reject(error);\n        }).finally(() => {\n          loading.value = false;\n        });\n      }\n\n      onMounted(() => {\n        load();\n      });\n\n      watch(stack, () => {\n        load();\n      }, {\n        deep: true,\n      });\n\n      return () => {\n        if (view.value && 'component' in view.value) {\n          let component = resolver(view.value.component);\n          let viewProps = view.value.props;\n\n          component.inheritAttrs = !!component.inheritAttrs;\n\n          return h(component, viewProps);\n        }\n\n        if (slots.default) {\n          return slots.default();\n        }\n      };\n    },\n  })\n;\n","import { defineComponent, type SlotsType, h, type PropType, onMounted, ref, onBeforeUnmount } from 'vue';\nimport type { ToastRegistry, Toast } from '../../Types/Toast';\nimport { useToasts } from '../../Services/ToastManager';\n\nexport const ToastControllerComponent = defineComponent({\n  name: 'ToastController',\n\n  slots: Object as SlotsType<{\n    default: { toasts: ToastRegistry },\n  }>,\n\n  // _props is a hack to avoid TS error on unused parameter as it is not used\n  // at the moment it will throw a TS error, but it has to be passed to read\n  // slots and attrs. Remember _ in front whenever you will actually have to\n  // use the props. https://github.com/microsoft/TypeScript/issues/9458\n  setup(_props, { slots, attrs }) {\n    const toasts = useToasts();\n\n    return () => h('div', attrs, slots.default({ toasts: toasts.value }));\n  },\n});\n\nexport const ToastComponent = defineComponent({\n  name: 'Toast',\n  props: {\n    toast: { type: Object as PropType<Toast>, required: true },\n  },\n  slots: Object as SlotsType<{\n    default: { toast: Toast, close: () => void },\n  }>,\n  setup(props, { slots, attrs }) {\n    const toasts = useToasts();\n    const timeout = ref();\n\n    function close() {\n      clearTimeout(timeout.value);\n      toasts.value = toasts.value.filter((toast) => toast.id !== props.toast.id);\n    }\n\n    onMounted(() => {\n      timeout.value = setTimeout(() => close(), props.toast.duration * 1000);\n    });\n\n    onBeforeUnmount(() => {\n      clearTimeout(timeout.value);\n    });\n\n    return () => h('li', attrs, slots.default({ toast: props.toast, close }));\n  },\n});\n","import { defineComponent, type SlotsType, h, ref, onMounted, onBeforeUnmount, nextTick } from 'vue';\nimport { EventBus } from '../../Events/EventBus';\nimport { useHttpClient } from '../../Composables/UseHttpClient';\n\nexport const PasswordConfirmationControllerComponent = defineComponent({\n  name: 'PasswordConfirmationController',\n  props: {\n    action: { type: String, required: true },\n  },\n  slots: Object as SlotsType<{\n    default: { open: boolean, submit: (data: any) => void, cancel: () => void },\n  }>,\n  setup(props, { slots, attrs }) {\n    const http = useHttpClient();\n    const original = ref();\n    const open = ref(false);\n\n    function onPasswordConfirm(event: any) {\n      original.value = event;\n      open.value = true;\n    }\n\n    async function submit(data: any) {\n      let { method, url, options } = original.value;\n\n      return await http.post(props.action, data).then(async () => {\n        return await http.dispatch(method, url, options).then(async (res: unknown) => {\n          cancel();\n          return await nextTick(() => res);\n        });\n      });\n    }\n\n    function cancel() {\n      open.value = false;\n      original.value = undefined;\n    }\n\n    onMounted(() => {\n      EventBus.addEventListener('password.confirm', onPasswordConfirm);\n    });\n\n    onBeforeUnmount(() => {\n      EventBus.removeEventListener('password.confirm', onPasswordConfirm);\n    });\n\n    return () => h('div', attrs, slots.default({ open: open.value, submit, cancel }));\n  },\n});\n","export type Locale = {\n  name: string,\n  code: string,\n}\n\nexport function trans(key: string, replace?: Record<string, string | number | boolean>) {\n  return makeReplacements(get(key), replace);\n}\n\nexport function transChoice(key: string, number: number, replace?: Record<string, string | number | boolean>) {\n  return makeReplacements(choose(get(key), number), replace);\n}\n\nfunction get(key: string): string {\n  let translation = APP_TRANSLATIONS[key];\n\n  if (typeof translation === 'undefined') {\n    translation = key;\n  }\n\n  return translation;\n}\n\nfunction choose(line: string, number: number): string {\n  let segments = line.split('|');\n  let value = extract(segments, number);\n\n  if (value) {\n    return value.trim();\n  }\n\n  segments = stripConditions(segments);\n  let pluralIndex = getPluralIndex(number);\n\n  if (segments.length === 1 || segments[pluralIndex] == undefined) {\n    return segments[0]!;\n  }\n\n  return segments[pluralIndex];\n}\n\nfunction extract(segments: string[], number: number) {\n  for (let part in segments) {\n    let line = extractFromString(part, number);\n\n    if (line) {\n      return line;\n    }\n  }\n}\n\nfunction extractFromString(part: string, number: number) {\n  const regex = /^[\\{\\[]([^\\[\\]\\{\\}]*)[\\}\\]](.*)/s;\n  const matches = part.match(regex);\n\n  if (!matches || matches.length !== 3) {\n    return null;\n  }\n\n  const condition = matches[1]!;\n  const value = matches[2]!;\n\n  if (condition.includes(',')) {\n    const [from, to] = condition.split(',', 2);\n\n    if (to === '*' && number >= Number(from)) {\n      return value;\n    } else if (from === '*' && number <= Number(to)) {\n      return value;\n    } else if (number >= Number(from) && number <= Number(to)) {\n      return value;\n    }\n  }\n\n  return Number(condition) == number ? value : null;\n}\n\nfunction stripConditions(segments: string[]) {\n  return segments.map(part => part.replace(/^[\\{\\[]([^\\[\\]\\{\\}]*)[\\}\\]]/, ''));\n}\n\nfunction makeReplacements(line: string, replace?: Record<string, string | number | boolean>) {\n  if (replace) {\n    return Object.keys(replace).reduce((prev, key) => prev.replace(`:${key}`, replace[key]!.toString()), line);\n  }\n\n  return line;\n}\n\nfunction getPluralIndex(number: number) {\n  switch (APP_LOCALE) {\n    case 'az':\n    case 'az_AZ':\n    case 'bo':\n    case 'bo_CN':\n    case 'bo_IN':\n    case 'dz':\n    case 'dz_BT':\n    case 'id':\n    case 'id_ID':\n    case 'ja':\n    case 'ja_JP':\n    case 'jv':\n    case 'ka':\n    case 'ka_GE':\n    case 'km':\n    case 'km_KH':\n    case 'kn':\n    case 'kn_IN':\n    case 'ko':\n    case 'ko_KR':\n    case 'ms':\n    case 'ms_MY':\n    case 'th':\n    case 'th_TH':\n    case 'tr':\n    case 'tr_CY':\n    case 'tr_TR':\n    case 'vi':\n    case 'vi_VN':\n    case 'zh':\n    case 'zh_CN':\n    case 'zh_HK':\n    case 'zh_SG':\n    case 'zh_TW':\n      return 0;\n    case 'af':\n    case 'af_ZA':\n    case 'bn':\n    case 'bn_BD':\n    case 'bn_IN':\n    case 'bg':\n    case 'bg_BG':\n    case 'ca':\n    case 'ca_AD':\n    case 'ca_ES':\n    case 'ca_FR':\n    case 'ca_IT':\n    case 'da':\n    case 'da_DK':\n    case 'de':\n    case 'de_AT':\n    case 'de_BE':\n    case 'de_CH':\n    case 'de_DE':\n    case 'de_LI':\n    case 'de_LU':\n    case 'el':\n    case 'el_CY':\n    case 'el_GR':\n    case 'en':\n    case 'en_AG':\n    case 'en_AU':\n    case 'en_BW':\n    case 'en_CA':\n    case 'en_DK':\n    case 'en_GB':\n    case 'en_HK':\n    case 'en_IE':\n    case 'en_IN':\n    case 'en_NG':\n    case 'en_NZ':\n    case 'en_PH':\n    case 'en_SG':\n    case 'en_US':\n    case 'en_ZA':\n    case 'en_ZM':\n    case 'en_ZW':\n    case 'eo':\n    case 'eo_US':\n    case 'es':\n    case 'es_AR':\n    case 'es_BO':\n    case 'es_CL':\n    case 'es_CO':\n    case 'es_CR':\n    case 'es_CU':\n    case 'es_DO':\n    case 'es_EC':\n    case 'es_ES':\n    case 'es_GT':\n    case 'es_HN':\n    case 'es_MX':\n    case 'es_NI':\n    case 'es_PA':\n    case 'es_PE':\n    case 'es_PR':\n    case 'es_PY':\n    case 'es_SV':\n    case 'es_US':\n    case 'es_UY':\n    case 'es_VE':\n    case 'et':\n    case 'et_EE':\n    case 'eu':\n    case 'eu_ES':\n    case 'eu_FR':\n    case 'fa':\n    case 'fa_IR':\n    case 'fi':\n    case 'fi_FI':\n    case 'fo':\n    case 'fo_FO':\n    case 'fur':\n    case 'fur_IT':\n    case 'fy':\n    case 'fy_DE':\n    case 'fy_NL':\n    case 'gl':\n    case 'gl_ES':\n    case 'gu':\n    case 'gu_IN':\n    case 'ha':\n    case 'ha_NG':\n    case 'he':\n    case 'he_IL':\n    case 'hu':\n    case 'hu_HU':\n    case 'is':\n    case 'is_IS':\n    case 'it':\n    case 'it_CH':\n    case 'it_IT':\n    case 'ku':\n    case 'ku_TR':\n    case 'lb':\n    case 'lb_LU':\n    case 'ml':\n    case 'ml_IN':\n    case 'mn':\n    case 'mn_MN':\n    case 'mr':\n    case 'mr_IN':\n    case 'nah':\n    case 'nb':\n    case 'nb_NO':\n    case 'ne':\n    case 'ne_NP':\n    case 'nl':\n    case 'nl_AW':\n    case 'nl_BE':\n    case 'nl_NL':\n    case 'nn':\n    case 'nn_NO':\n    case 'no':\n    case 'om':\n    case 'om_ET':\n    case 'om_KE':\n    case 'or':\n    case 'or_IN':\n    case 'pa':\n    case 'pa_IN':\n    case 'pa_PK':\n    case 'pap':\n    case 'pap_AN':\n    case 'pap_AW':\n    case 'pap_CW':\n    case 'ps':\n    case 'ps_AF':\n    case 'pt':\n    case 'pt_BR':\n    case 'pt_PT':\n    case 'so':\n    case 'so_DJ':\n    case 'so_ET':\n    case 'so_KE':\n    case 'so_SO':\n    case 'sq':\n    case 'sq_AL':\n    case 'sq_MK':\n    case 'sv':\n    case 'sv_FI':\n    case 'sv_SE':\n    case 'sw':\n    case 'sw_KE':\n    case 'sw_TZ':\n    case 'ta':\n    case 'ta_IN':\n    case 'ta_LK':\n    case 'te':\n    case 'te_IN':\n    case 'tk':\n    case 'tk_TM':\n    case 'ur':\n    case 'ur_IN':\n    case 'ur_PK':\n    case 'zu':\n    case 'zu_ZA':\n      return (number == 1) ? 0 : 1;\n    case 'am':\n    case 'am_ET':\n    case 'bh':\n    case 'fil':\n    case 'fil_PH':\n    case 'fr':\n    case 'fr_BE':\n    case 'fr_CA':\n    case 'fr_CH':\n    case 'fr_FR':\n    case 'fr_LU':\n    case 'gun':\n    case 'hi':\n    case 'hi_IN':\n    case 'hy':\n    case 'hy_AM':\n    case 'ln':\n    case 'ln_CD':\n    case 'mg':\n    case 'mg_MG':\n    case 'nso':\n    case 'nso_ZA':\n    case 'ti':\n    case 'ti_ER':\n    case 'ti_ET':\n    case 'wa':\n    case 'wa_BE':\n    case 'xbr':\n      return ((number == 0) || (number == 1)) ? 0 : 1;\n    case 'be':\n    case 'be_BY':\n    case 'bs':\n    case 'bs_BA':\n    case 'hr':\n    case 'hr_HR':\n    case 'ru':\n    case 'ru_RU':\n    case 'ru_UA':\n    case 'sr':\n    case 'sr_ME':\n    case 'sr_RS':\n    case 'uk':\n    case 'uk_UA':\n      return ((number % 10 == 1) && (number % 100 != 11)) ? 0 : (((number % 10 >= 2) && (number % 10 <= 4) && ((number % 100 < 10) || (number % 100 >= 20))) ? 1 : 2);\n    case 'cs':\n    case 'cs_CZ':\n    case 'sk':\n    case 'sk_SK':\n      return (number == 1) ? 0 : (((number >= 2) && (number <= 4)) ? 1 : 2);\n    case 'ga':\n    case 'ga_IE':\n      return (number == 1) ? 0 : ((number == 2) ? 1 : 2);\n    case 'lt':\n    case 'lt_LT':\n      return ((number % 10 == 1) && (number % 100 != 11)) ? 0 : (((number % 10 >= 2) && ((number % 100 < 10) || (number % 100 >= 20))) ? 1 : 2);\n    case 'sl':\n    case 'sl_SI':\n      return (number % 100 == 1) ? 0 : ((number % 100 == 2) ? 1 : (((number % 100 == 3) || (number % 100 == 4)) ? 2 : 3));\n    case 'mk':\n    case 'mk_MK':\n      return (number % 10 == 1) ? 0 : 1;\n    case 'mt':\n    case 'mt_MT':\n      return (number == 1) ? 0 : (((number == 0) || ((number % 100 > 1) && (number % 100 < 11))) ? 1 : (((number % 100 > 10) && (number % 100 < 20)) ? 2 : 3));\n    case 'lv':\n    case 'lv_LV':\n      return (number == 0) ? 0 : (((number % 10 == 1) && (number % 100 != 11)) ? 1 : 2);\n    case 'pl':\n    case 'pl_PL':\n      return (number == 1) ? 0 : (((number % 10 >= 2) && (number % 10 <= 4) && ((number % 100 < 12) || (number % 100 > 14))) ? 1 : 2);\n    case 'cy':\n    case 'cy_GB':\n      return (number == 1) ? 0 : ((number == 2) ? 1 : (((number == 8) || (number == 11)) ? 2 : 3));\n    case 'ro':\n    case 'ro_RO':\n      return (number == 1) ? 0 : (((number == 0) || ((number % 100 > 0) && (number % 100 < 20))) ? 1 : 2);\n    case 'ar':\n    case 'ar_AE':\n    case 'ar_BH':\n    case 'ar_DZ':\n    case 'ar_EG':\n    case 'ar_IN':\n    case 'ar_IQ':\n    case 'ar_JO':\n    case 'ar_KW':\n    case 'ar_LB':\n    case 'ar_LY':\n    case 'ar_MA':\n    case 'ar_OM':\n    case 'ar_QA':\n    case 'ar_SA':\n    case 'ar_SD':\n    case 'ar_SS':\n    case 'ar_SY':\n    case 'ar_TN':\n    case 'ar_YE':\n      return (number == 0) ? 0 : ((number == 1) ? 1 : ((number == 2) ? 2 : (((number % 100 >= 3) && (number % 100 <= 10)) ? 3 : (((number % 100 >= 11) && (number % 100 <= 99)) ? 4 : 5))));\n    default:\n      return 0;\n  }\n}\n","import { toRaw } from 'vue';\nimport { url } from './Url';\n\ntype Params = Record<string, any>;\n\nexport type Route = {\n  uri: string;\n  domain: string;\n  params: string[];\n  binding: Record<string, string>;\n}\n\nexport function route(name: string, params: Params = {}, hash?: string) {\n  return build(localizeName(name), params, hash);\n}\n\n\nfunction localizeName(name: string) {\n  if (name.startsWith(APP_FALLBACK_LOCALE)) {\n    return name.replace(`${APP_FALLBACK_LOCALE}.`, '');\n  }\n\n  if (APP_AVAILABLE_LOCALES.findIndex(lang => name.startsWith(lang)) >= 0) {\n    return name;\n  }\n\n  if (!name.startsWith('web.')) {\n    return name;\n  }\n\n  if (APP_LOCALE !== APP_FALLBACK_LOCALE) {\n    return `${APP_LOCALE}.${name}`;\n  }\n\n  return name;\n}\n\n\nfunction build(name: string, params: Params, hash?: string) {\n  const route = APP_ROUTES[name];\n\n  if (!route) {\n    throw new Error(`Undefined route: ${name}`);\n  }\n\n  const uri = replaceRouteParameters(route, params);\n\n  const search = Object.keys(params).reduce((prev, key) => {\n    if (!route.params.includes(key)) {\n      prev[key] = toRaw(params[key]);\n    }\n\n    return prev;\n  }, {} as Record<string, any>);\n\n  return url(uri, search, hash, route.domain);\n}\n\n\nfunction replaceRouteParameters(route: Route, params: Params) {\n  return route.params.reduce((uri, param) => {\n    let binding = route.binding[param] || 'id';\n    let value = toRaw(params[param]);\n\n    if (typeof value === 'object') {\n      value = value[binding];\n    }\n\n    if (!value) {\n      if (!uri.match(new RegExp(`\\{${param}\\\\?\\}`))) {\n        throw new Error(`Parameter ${param} is required for uri ${route.uri}.`);\n      }\n    }\n\n    uri = uri.replace(new RegExp(`\\{${param}\\\\??\\}`), value ?? '');\n\n    if (uri.endsWith('/')) {\n      uri = uri.slice(0, -1);\n    }\n\n    return uri;\n  }, route.uri);\n}\n","import type { Meta } from '../Types/State.ts';\n\nexport function updateHead(meta?: Meta[]) {\n  if (!meta) {\n    return meta;\n  }\n\n  document.head.querySelectorAll('[data-fdn]').forEach((element) => element.remove());\n\n  meta.forEach((tag) => {\n    let element: HTMLElement;\n\n    switch (tag.type) {\n      case 'title':\n        element = document.createElement('title');\n        element.innerHTML = tag.content;\n        break;\n\n      case 'meta':\n        element = document.createElement('meta');\n        element.setAttribute('name', tag.name);\n        element.setAttribute('content', tag.content);\n        break;\n\n      case 'link':\n        element = document.createElement('link');\n        element.setAttribute('rel', tag.rel);\n        element.setAttribute('href', tag.href);\n        break;\n\n      case 'snippet':\n        element = document.createElement('script');\n        element.setAttribute('type', 'application/ld+json');\n        element.innerHTML = tag.content;\n        break;\n    }\n\n    element.setAttribute('data-fdn', '');\n\n    document.head.append(element);\n  });\n\n  return meta;\n}\n","import { defineComponent, type PropType, provide, h, ref, toValue, toRaw, onMounted, onBeforeUnmount, computed, nextTick } from 'vue';\nimport { type ViewResolver } from '../../Types/ViewResolver';\nimport { type State, type InitialState } from '../../Types/State';\nimport type { CompleteResponse } from '../../Http/Client/Response';\nimport { StackedViewResolverInjectionKey, StackedViewInjectionKey, StackedViewDepthInjectionKey } from '../../Services/StackedView';\nimport { StateLocationInjectionKey, StateManagerInjectionKey, StateStackSignatureInjectionKey, updateStack, StateAuthenticated, StateAbilities, StateHistoryInjectionKey, StateShared, StateErrorsInjectionKey } from '../../Services/StateManager';\nimport { RouterViewComponent } from './RouterViewComponent';\nimport { ToastRegistryInjectionKey } from '../../Services/ToastManager';\nimport { updateHead } from '../../Services/MetaManager.ts';\n\n\nexport const RouterComponent = defineComponent({\n  inheritAttrs: false,\n  name: 'Router',\n  props: {\n    resolver: {\n      type: Function as PropType<ViewResolver>,\n      required: true,\n    },\n    state: {\n      type: Object as PropType<InitialState>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const abilities = ref(props.state.abilities);\n    const errors = ref(props.state.errors);\n    const meta = ref(props.state.meta);\n    const shared = ref(props.state.shared || {});\n    const authenticated = ref(props.state.authenticated);\n    const location = ref(props.state.location);\n    const stack = ref(props.state.stack);\n    const signature = ref(props.state.signature);\n    const toasts = ref(props.state.toasts);\n\n    function buildState() {\n      return {\n        meta: toRaw(toValue(meta)),\n        location: toRaw(toValue(location)),\n        signature: toRaw(toValue(signature)),\n        stack: toRaw(toValue(stack)),\n      };\n    }\n\n    async function update(fresh: CompleteResponse): Promise<State> {\n      return await nextTick(async () => {\n        abilities.value = { ...abilities.value, ...fresh.abilities };\n        authenticated.value = fresh.authenticated;\n        errors.value = fresh.errors;\n\n        if (fresh.meta) meta.value = updateHead(fresh.meta);\n        if (fresh.stack) stack.value = updateStack(toRaw(toValue(stack.value)), fresh.stack);\n        if (fresh.location) location.value = fresh.location;\n        if (fresh.signature) signature.value = fresh.signature;\n\n        return await nextTick(() => {\n          if (fresh.shared) shared.value = { ...shared.value, ...fresh.shared };\n          if (fresh.toasts && fresh.toasts.length > 0) toasts.value = [...toasts.value, ...fresh.toasts];\n\n          return buildState();\n        });\n      });\n    }\n\n    provide(StateAbilities, abilities);\n    provide(StateAuthenticated, authenticated);\n    provide(StateShared, shared);\n    provide(StateLocationInjectionKey, location);\n    provide(StateStackSignatureInjectionKey, signature);\n    provide(StateErrorsInjectionKey, errors);\n    provide(StateManagerInjectionKey, update);\n    provide(StackedViewResolverInjectionKey, props.resolver);\n    provide(StackedViewDepthInjectionKey, computed(() => 0));\n    provide(StackedViewInjectionKey, stack);\n    provide(ToastRegistryInjectionKey, toasts);\n    provide(StateHistoryInjectionKey, {\n      historyPushState(state: State) {\n        window.history.pushState(state, '', state.location);\n      },\n      historyReplaceState(state: State) {\n        window.history.replaceState(state, '', state.location);\n      },\n    });\n\n    function handlePopStateEvent(event: PopStateEvent) {\n      if (event.state) {\n        location.value = event.state.location;\n        stack.value = event.state.stack;\n        signature.value = event.state.signature;\n      } else {\n        window.history.replaceState(buildState(), '', location.value);\n        document.body.scroll({ behavior: 'instant', left: 0, top: 0 });\n      }\n    }\n\n    onMounted(() => {\n      window.history.replaceState(buildState(), '', location.value);\n      window.addEventListener('popstate', handlePopStateEvent);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('popstate', handlePopStateEvent);\n    });\n\n    return () => {\n      return h(RouterViewComponent);\n    };\n  },\n});\n","import { renderToString } from '@vue/server-renderer';\nimport { type InitialState } from '../Types/State';\nimport { type ViewResolver } from '../Types/ViewResolver';\nimport { RouterComponent } from '../Components/Routing/RouterComponent';\n\nexport type AppFactory = (options: AppFactoryOptions) => any;\n\nexport type AppFactoryOptions = {\n  router: typeof RouterComponent,\n  props: { resolver: ViewResolver, state: InitialState },\n}\n\ntype Options = {\n  initial?: InitialState | undefined,\n  resolver: ViewResolver,\n  setup: AppFactory,\n}\n\nexport async function createFoundationController({ initial, resolver, setup }: Options) {\n  const isServer = typeof window === 'undefined';\n  const state = initial || readInitialState();\n\n  const app = setup({ router: RouterComponent, props: { resolver, state } });\n\n  if (isServer) {\n    return await renderToString(app);\n  }\n\n  return '';\n}\n\n\nfunction readInitialState(): InitialState {\n  let element = document.getElementById('fdn-init');\n\n  if (!element || !element.textContent) {\n    throw new Error('Cannot find initial script element with MVC state.');\n  }\n\n  return JSON.parse(element.textContent);\n}\n","import { ref, type Ref, nextTick } from 'vue';\n\ninterface Config {\n  title?: string;\n  description?: string;\n  yes?: string;\n  no?: string;\n}\n\ninterface ConfigWithCallback<T> extends Config {\n  callback: Callback<T>;\n}\n\nexport interface Confirmation extends Config {\n  processing: boolean,\n  confirm: () => void;\n  cancel: () => void;\n}\n\ntype Callback<T> = () => Promise<T> | T;\n\nconst confirmation = ref() as Ref<Confirmation | undefined>;\n\nasync function createConfirmation<T>(config: Config, callback: Callback<T>): Promise<T> {\n  return new Promise((resolve, reject) => {\n    function confirm() {\n      confirmation.value!.processing = true;\n\n      nextTick(() => {\n        Promise.resolve(callback()).then((value: T) => {\n          confirmation.value = undefined;\n          nextTick(() => resolve(value));\n        }).catch((error) => {\n          confirmation.value = undefined;\n          nextTick(() => reject(error));\n        });\n      });\n    }\n\n    function cancel() {\n      confirmation.value = undefined;\n      nextTick(() => reject());\n    }\n\n    confirmation.value = { ...config, processing: false, confirm, cancel };\n  });\n}\n\nasync function factory<T>(config: ConfigWithCallback<T>): Promise<T>;\nasync function factory<T>(callback: Callback<T>): Promise<T>;\nasync function factory<T>(config: Config, callback: Callback<T>): Promise<T>;\nasync function factory<T>(configOrCallback: any, callback?: Callback<T>): Promise<T> {\n  if (callback === undefined) {\n    if (configOrCallback instanceof Function) {\n      return createConfirmation({}, configOrCallback);\n    } else {\n      return createConfirmation(configOrCallback, configOrCallback.callback);\n    }\n  } else {\n    if (configOrCallback instanceof Function) {\n      return createConfirmation({}, configOrCallback);\n    } else {\n      return createConfirmation(configOrCallback, callback);\n    }\n  }\n}\n\nexport function useCurrentConfirmation() {\n  return confirmation;\n}\n\nexport function useConfirmation() {\n  return factory;\n}\n","import { ref, type Ref } from 'vue';\nimport type { FormContextInterface } from '../Services/FormContext.ts';\n\ntype FormApi = {\n  ctx: FormContextInterface;\n  submit: () => void;\n}\n\nexport function useFormApi() {\n  return ref() as Ref<FormApi>;\n}\n","import { inject } from 'vue';\nimport { FormContextInjectionKey, type FormContextInterface } from '../Services/FormContext';\n\nexport function useFormContext(): FormContextInterface | null {\n  return inject(FormContextInjectionKey, null);\n}\n\nexport function usePersistentFormContext(): FormContextInterface {\n  let context = inject(FormContextInjectionKey);\n\n  if (!context) {\n    throw new Error('Accessing form outside of context.');\n  }\n\n  return context;\n}\n","import { inject, type Ref } from 'vue';\nimport { StackedViewLocationInjectionKey } from '../Services/StackedView';\n\nexport function useViewLocation(): Ref<string | undefined> {\n  const view = inject(StackedViewLocationInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get stacked view parent out of Router context!');\n  }\n\n  return view;\n}\n","import { inject, type Ref, computed } from 'vue';\nimport { StackedViewParentInjectionKey } from '../Services/StackedView';\nimport type { StackedViewResolved } from '../Types/StackedView';\nimport { url } from '../Support/Url';\n\nexport function useViewParent(): Ref<StackedViewResolved | undefined> {\n  const view = inject(StackedViewParentInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get parent view out of Router context!');\n  }\n\n  return view;\n}\n\nexport function useViewParentLocation() {\n  const parent = useViewParent();\n\n  return computed(() => {\n    if (parent && parent.value && parent.value.location) {\n      return url(parent.value.location, parent.value.query);\n    }\n  });\n}\n","import { inject, type Ref } from 'vue';\nimport { StackedViewQueryInjectionKey } from '../Services/StackedView';\n\nexport function useViewQuery(): Ref<Record<string, any> | undefined> {\n  const view = inject(StackedViewQueryInjectionKey);\n\n  if (!view) {\n    throw new Error('You\\'re trying to get stacked view query params out of Router context!');\n  }\n\n  return view;\n}\n","export function groupBy<T extends Record<K, PropertyKey>, K extends keyof T>(array: T[], key: K): Record<T[K], T[]> {\n  return array.reduce((result, item) => {\n    const groupKey = item[key];\n\n    if (!result[groupKey]) {\n      result[groupKey] = [];\n    }\n\n    result[groupKey].push(item);\n\n    return result;\n  }, {} as Record<T[K], T[]>);\n}\n\n\n","export function isCountryImplicit(country: string | null | undefined) {\n  if (country) {\n    return APP_COUNTRIES_IMPLICITLY_ADDRESSES.includes(country);\n  }\n\n  return false;\n}\n\nexport function isCountryExplicit(country: string | null | undefined) {\n  return !isCountryImplicit(country);\n}\n","export function blank(value: any) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n\n  if (typeof value === 'number' || typeof value === 'boolean') {\n    return false;\n  }\n\n  if (typeof value === 'string') {\n    return value.trim() === '';\n  }\n\n  if (value instanceof Array) {\n    return value.length > 0;\n  }\n\n  if (value instanceof Set || value instanceof Map) {\n    return value.size > 0;\n  }\n\n  return !value;\n}\n\nexport function filled(value: any) {\n  return !blank(value);\n}\n","export function hash(length: number = 16): string {\n  return Array.from(window.crypto.getRandomValues(new Uint8Array(Math.ceil(length / 2))), (b) => ('0' + (b & 0xFF).toString(16)).slice(-2)).join('');\n}\n","export type NestedSetItem = {\n  id: number;\n  left: number;\n  right: number;\n  parent: number | null;\n  label: string | null;\n}\n\nexport type NestedSet<T extends NestedSetItem = any> = T[];\n\nexport function nestedSetRoot<T extends NestedSetItem = any>(data: NestedSet<T>) {\n  return data.filter((node) => node.parent === null);\n}\n\nexport function nestedSetChildren<T extends NestedSetItem = any>(data: NestedSet<T>, item: T) {\n  return data.filter((node) => (node.left > item.left && node.right < item.right && node.parent === item.id));\n}\n\nexport function nestedSetAncestors<T extends NestedSetItem = any>(data: NestedSet<T>, item: T) {\n  return data.filter((node) => (node.left < item.left && node.right > item.right));\n}\n\nexport function nestedSetDescendants<T extends NestedSetItem = any>(data: NestedSet<T>, item: T) {\n  return data.filter((node) => (node.left > item.left && node.right < item.right));\n}\n","export function random(length: number, characterSet: string | undefined = undefined) {\n  let result = '';\n\n  const characters = characterSet || 'QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890';\n  const charactersLength = characters.length;\n\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n\n  return result;\n}\n","export function findScrollParent(element: HTMLElement | HTMLElement[] | undefined | null) {\n  if (!element) {\n    return undefined;\n  }\n\n  if (Array.isArray(element)) {\n    if (element.length === 0) {\n      return undefined;\n    }\n\n    element = element[0];\n  }\n\n  let parent: HTMLElement | null | undefined = element;\n\n  while (parent) {\n    const { overflow } = window.getComputedStyle(parent);\n\n    if (overflow.split(' ').some((o) => o === 'auto' || o === 'scroll')) {\n      return parent;\n    }\n\n    parent = parent.parentElement;\n  }\n\n  return document.documentElement;\n}\n","export const ToastKind = {\n  SUCCESS: 'success',\n  DANGER: 'danger',\n  INFO: 'info',\n  WARNING: 'warning',\n} as const;\n\nexport interface Toast {\n  id: string,\n  description: string,\n  duration: number,\n  kind: typeof ToastKind[keyof typeof ToastKind],\n}\n\nexport type ToastRegistry = Toast[];\n","import type { App, Plugin, ConcreteComponent } from 'vue';\nimport { FormControllerComponent } from './Components/Controllers/FormControllerComponent.ts';\nimport { RouterViewComponent } from './Components/Routing/RouterViewComponent.ts';\nimport { RouterLinkComponent } from './Components/Routing/RouterLinkComponent.ts';\nimport { RouterNestedComponent } from './Components/Routing/RouterNestedComponent.ts';\nimport { RouterFrameComponent } from './Components/Routing/RouterFrameComponent.ts';\nimport { ToastControllerComponent, ToastComponent } from './Components/Controllers/ToastControllerComponent.ts';\nimport { PasswordConfirmationControllerComponent } from './Components/Controllers/PasswordConfirmationControllerComponent.ts';\nimport { trans, transChoice } from './Support/Translator.ts';\nimport { route } from './Support/Route.ts';\nimport { StackedViewLayoutInjectionKey } from './Composables/UseStackLayout.ts';\n\nexport * from './Application/Factory.ts';\n\nexport * from './Components/Controllers/FormControllerComponent.ts';\nexport * from './Components/Controllers/ToastControllerComponent.ts';\n\nexport * from './Components/Routing/RouterComponent.ts';\nexport * from './Components/Routing/RouterLinkComponent.ts';\nexport * from './Components/Routing/RouterViewComponent.ts';\nexport * from './Components/Routing/RouterNestedComponent.ts';\nexport * from './Components/Routing/RouterFrameComponent.ts';\n\nexport * from './Composables/UseConfirmation.ts';\nexport * from './Composables/UseStackLayout.ts';\nexport * from './Composables/UseFormApi.ts';\nexport * from './Composables/UseFormContext.ts';\nexport * from './Composables/UseHttpClient.ts';\nexport * from './Composables/UseViewDepth.ts';\nexport * from './Composables/UseViewLocation.ts';\nexport * from './Composables/UseViewParent.ts';\nexport * from './Composables/UseViewQuery.ts';\nexport * from './Composables/UseViewResolver.ts';\nexport * from './Composables/UseViewStack.ts';\n\nexport * from './Events/EventBus.ts';\n\nexport * from './Http/Client/Request.ts';\nexport * from './Http/Client/Response.ts';\n\nexport * from './Services/FormContext.ts';\nexport * from './Services/StateManager.ts';\nexport * from './Services/StackedView.ts';\nexport * from './Services/ToastManager.ts';\n\nexport * from './Support/Array.ts';\nexport * from './Support/Countries.ts';\nexport * from './Support/Empty.ts';\nexport * from './Support/ErrorModal.ts';\nexport * from './Support/FormData.ts';\nexport * from './Support/Hash.ts';\nexport * from './Support/NestedSet.ts';\nexport * from './Support/Random.ts';\nexport * from './Support/Route.ts';\nexport * from './Support/Scroll.ts';\nexport * from './Support/Translator.ts';\nexport * from './Support/Url.ts';\nexport * from './Support/Wrap.ts';\n\nexport * from './Types/HeadMeta.ts';\nexport * from './Types/RouterRedirect.ts';\nexport * from './Types/StackedView.ts';\nexport * from './Types/State.ts';\nexport * from './Types/Toast.ts';\nexport * from './Types/ViewResolver.ts';\n\ninterface Configuration {\n  layout?: ConcreteComponent | string | undefined,\n}\n\nexport function createOtherSoftwareFoundation(options: Configuration = {}): Plugin {\n  return {\n    install(app: App) {\n      app.component('RouterFrame', RouterFrameComponent);\n      app.component('RouterNested', RouterNestedComponent);\n      app.component('RouterView', RouterViewComponent);\n      app.component('RouterLink', RouterLinkComponent);\n      app.component('FormController', FormControllerComponent);\n      app.component('PasswordConfirmationController', PasswordConfirmationControllerComponent);\n      app.component('ToastController', ToastControllerComponent);\n      app.component('Toast', ToastComponent);\n\n      app.provide(StackedViewLayoutInjectionKey, options.layout);\n\n      app.config.globalProperties.$t = trans;\n      app.config.globalProperties.$tc = transChoice;\n      app.config.globalProperties.$route = route;\n    },\n  };\n}\n"],"names":["url","value","hash","route"],"mappings":"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CL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KA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"}