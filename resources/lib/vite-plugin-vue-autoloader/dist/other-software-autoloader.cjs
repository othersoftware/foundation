"use strict";const l=require("vite"),p=require("node:fs"),u=require("node:path");function A(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const D=A(u);function g(t,e=[".vue"],n=[]){return p.existsSync(t)&&p.readdirSync(t).forEach(i=>{const r=u.join(t,i);p.statSync(r).isDirectory()?n=g(r,e,n):e.forEach(a=>{r.endsWith(a)&&n.push(r)})}),n}function h(t){return t.charAt(0).toUpperCase()+t.slice(1)}function V(t,e,n=void 0){e=l.normalizePath(e),t=l.normalizePath(t);let o=e.replace(t,"").replace(/^\//,"").replace(".vue","").split("/").join(".");return n?n+"::"+o:o}function $(t,e,n=void 0){e=l.normalizePath(e),t=l.normalizePath(t);let o=e.replace(t,"").replace(/^\//,"").replace(".vue","").split("/");return n&&o.unshift(n),o.map(h).join("")}function j(t,e=void 0){t=l.normalizePath(t);let n=u.basename(t),o=u.parse(n),i=h(o.name);return e?h(e)+i:i}function f(t,e,n=void 0){const o=new Map,i=new Map;return Array.isArray(e)&&(e=Object.fromEntries(e.map(r=>[r,void 0]))),typeof e=="string"&&(e={[e]:void 0}),Object.entries(e).forEach(([r,s])=>{s&&m(u.resolve(t.root,s),i,o,n),m(u.resolve(t.root,r),i,void 0,n)}),{components:i,vendors:o}}function m(t,e,n=void 0,o=void 0){g(t).forEach(i=>{let r=j(i,o),s=V(t,i,o),a=$(t,i,o);i=l.normalizePath(i),n&&n.set(a,{global:r,name:a,laravel:s,path:i}),e.set(a,{global:r,name:a,laravel:s,path:i})})}function I(t){let e=[];return t.forEach(n=>e.push(`import ${n.global} from '${n.path}';`)),e.push("export {"),t.forEach(n=>e.push(`  ${n.global},`)),e.push("};"),e.push(""),e.push("export function createOtherSoftwareAutoloader() {"),e.push("  return {"),e.push("    install(app) {"),t.forEach(n=>e.push(`      app.component('${n.global}', ${n.global});`)),e.push("    },"),e.push("  };"),e.push("};"),e.push(""),e.join(`
`)}function d(t,e,n){let o=u.resolve(t.root,e),i=u.resolve(o,"components.d.ts"),r=[];r.push("// THIS FILE IS AUTOGENERATED!"),r.push("// DO NOT EDIT!"),r.push(""),r.push("declare module '@app/components' {"),r.push("  import { Plugin } from 'vue';"),r.push("  export function createOtherSoftwareAutoloader(): Plugin;"),r.push(""),n.forEach(s=>r.push(`  export { default as ${s.global} } from '${l.normalizePath(u.relative(o,s.path))}';`)),r.push("}"),r.push(""),p.writeFileSync(i,r.join(`
`))}function w(t,e,n){let o=u.resolve(t.root,e),i=u.resolve(o,"vue.d.ts"),r=[];r.push("// THIS FILE IS AUTOGENERATED!"),r.push("// DO NOT EDIT!"),r.push(""),r.push("declare module '@vue/runtime-core' {"),r.push("  export interface GlobalComponents {"),n.forEach(s=>r.push(`    ${s.global}: typeof import('${l.normalizePath(u.relative(o,s.path))}')['default'],`)),r.push("  }"),r.push("}"),r.push(""),r.push("export {}"),r.push(""),p.writeFileSync(i,r.join(`
`))}function O(t){return Array.isArray(t)?[t.at(0),void 0]:typeof t=="string"?[t,void 0]:Object.entries(t).at(0)}function v(t,e,n=!0){const o=O(e.target);if(!o)throw new Error("Unknown target for output files!");let[i,r]=o,s=f(t,e.components);return r&&(d(t,r,s.vendors),w(t,r,s.vendors)),d(t,i,s.components),w(t,i,s.components),n?I(s.components):null}function P(t){let e=[];return t.forEach(n=>e.push(`import ${n.name} from '${n.path}';`)),e.push(""),e.push("const ViewsRepository = {"),t.forEach(n=>e.push(`  '${n.laravel}': ${n.name},`)),e.push("};"),e.push(""),e.push("export function createViewResolver(name) {"),e.push("  const view = ViewsRepository[name];"),e.push(""),e.push("  if (!view) {"),e.push(`    throw new Error('View "' + name + '" not found!');`),e.push("  }"),e.push(""),e.push("  return view;"),e.push("}"),e.push(""),e.join(`
`)}function E(t,e){let n=u.resolve(t.root,e),o=u.resolve(n,"views.d.ts"),i=[];i.push("// THIS FILE IS AUTOGENERATED!"),i.push("// DO NOT EDIT!"),i.push(""),i.push("declare module '@app/views' {"),i.push("  export function createViewResolver(name: string): any;"),i.push("}"),i.push(""),p.writeFileSync(o,i.join(`
`))}function y(t,e,n){let o=u.resolve(t.root,e),i=u.resolve(o,".phpstorm.meta.php"),r=[],s=[];n.forEach(a=>s.push(`'${a.laravel}'`)),r.push("<?php"),r.push(""),r.push("namespace PHPSTORM_META {"),r.push(`  registerArgumentsSet('vueApplicationViews', ${s.join(", ")});`),r.push(""),r.push("  expectedArguments(\\OtherSoftware\\Bridge\\ResponseFactory::view(), 0, argumentsSet('vueApplicationViews'));"),r.push("  expectedArguments(\\OtherSoftware\\Support\\Facades\\Vue::view(), 0, argumentsSet('vueApplicationViews'));"),r.push("}"),r.push(""),p.writeFileSync(i,r.join(`
`))}function S(t,e,n=!0){const o=O(e.target);if(!o)throw new Error("Unknown target for output files!");let[i,r]=o;const s=f(t,e.views,e.namespace);return r&&(E(t,r),y(t,r,s.vendors)),E(t,i),y(t,i,s.components),n?P(s.components):null}let c;function T(t,e){let n=f(t,e.views,e.namespace);c=new Set,n.components.forEach(o=>{c.add(o.path)})}function b(t,e){T(t,e)}function M(t,e,n,o){c||T(t,e);const i=D.normalize(o);if(!o.endsWith(".vue")||!c.has(i))return{code:n,map:null};if(n.includes("<template>")&&!n.includes("<RouterView")&&!n.includes("<router-view")){const r=n.lastIndexOf("</template>"),s=n.slice(0,r),a=n.slice(r);return{code:`${s}
  <RouterView />
${a}`,map:null}}return{code:n,map:null}}function x(t){let e;function n(o){v(e,t,!1),S(e,t,!1),b(e,t);const i=o.moduleGraph.getModuleById("\0@app/components"),r=o.moduleGraph.getModuleById("\0@app/views");i&&o.reloadModule(i),r&&o.reloadModule(r)}return{name:"vue-autoloader",enforce:"pre",configResolved(o){e=o},resolveId(o){if(o==="@app/components")return"\0@app/components";if(o==="@app/views")return"\0@app/views"},load(o){if(o==="\0@app/components")return v(e,t);if(o==="\0@app/views")return S(e,t)},async transform(o,i){return M(e,t,o,i)},configureServer(o){const i=r=>{r.endsWith(".vue")&&n(o)};o.watcher.on("add",i),o.watcher.on("unlink",i),o.watcher.on("addDir",i),o.watcher.on("unlinkDir",i)}}}module.exports=x;
